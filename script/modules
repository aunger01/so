_jsload_('mouse', 'g.Rb.Gb({tN:"_docMsMov",zca:function(){var a=this.Xa.$c;g.F.h(a,"mousedown",this.L4,this);g.F.h(document,"mousedown",this.R4,this);this.xpa||g.l.Ie||(this.dw=g.a.MD(this.dw,150,this),this.xpa=!0);this.o7();g.F.h(document,"mouseout",this.dw,this);this.h(this.tN,this.F6,this);g.F.h(a,"mouseover",this.M4,this);g.F.h(a,"mouseup",this.N4,this);g.F.h(a,"contextmenu",this.JF,this);g.F.h(a,"rightclick",this.JF,this)},uha:function(){var a=this.Xa.$c;g.F.G(a,"mousedown",this.L4,this);g.F.G(document,"mousedown", this.R4,this);this.Dna();g.F.G(document,"mouseout",this.dw,this);this.G(this.tN,this.F6,this);g.F.G(a,"mouseover",this.M4,this);g.F.G(a,"mouseup",this.N4,this);g.F.G(a,"contextmenu",this.JF,this);g.F.G(a,"rightclick",this.JF,this)},Bca:function(){g.F.h(this.Xa.$c,"mousewheel",this.K4,this)},i_:function(){g.F.G(this.Xa.$c,"mousewheel",this.K4,this)},Ena:function(){g.F.G(document,"mousemove",this.dw,this);g.F.G(this.Xa.$c,"mousemove",this.$R,this)},o7:function(){g.F.h(document,"mousemove",this.dw,this); g.F.h(this.Xa.$c,"mousemove",this.$R,this)},Dna:function(){g.F.G(document,"mousemove",this.dw,this);g.F.G(this.Xa.$c,"mousemove",this.$R,this)},M4:function(){this.IG=!0},R4:function(){this.IG=!1},dw:function(a){if(!this.Of&&!this.vg&&this.Xa){var b=this.Ni(a,!0,!0);this.q(this.tN,{event:a,UJ:b})}},Aca:function(){this.h("mousemove",this.G_);this.h("mouseout",this.H_);this.h("mouseover",this.I_);this.h("mouseup",this.J_);this.h("mousedown",this.F_);this.h("rightclick",this.L_);this.h("contextmenu", this.x_);this.h("rdblclick",this.M_)},wha:function(){this.G("mousemove",this.G_);this.G("mouseout",this.H_);this.G("mouseover",this.I_);this.G("mouseup",this.J_);this.G("mousedown",this.F_);this.G("rightclick",this.L_);this.G("contextmenu",this.x_);this.G("rdblclick",this.M_)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.xca():this.EO()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.K_):this.G("mousewheel",this.K_)},JF:function(a){g.F.preventDefault(a)}, lha:function(a){var b=this.Ni(a,!1,!0),c=0;"3D"==this.B.view.type?(this.qa("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&g.a.Sh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c),0==c/120%1&&(c/=2)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.p2(a,b.Sa,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&g.a.Sh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.V.UC=(this.V.UC|| 0)+c,this.q("mousewheel",b))},K4:function(a){"info"!=a.af&&this.get("scrollWheel")&&this.lha(a)},cS:function(a,b){b=this.Ni(a,!1,!0);if(!this.Ov(b.Bb,this.V.Ex)){var c=this.V;c.Ex=b.Bb;if(c.Ar){if(!c.Ad&&(b.Bb.x!==c.ko.x||b.Bb.y!==c.ko.y)){var d;this.bO(c.$t)&&c.$t.get("draggable")&&(d=c.$t);!d&&this.get("dragEnable")&&(d=this);d&&(c.Ad=!0,c.kq=d,c.jg=c.ko,c.jq=c.KT)}c.Ad&&(c.dk=b,b.button=a.buttons||a.button||0,this.WO())}}},sJ:function(){var a=this.UJ;g.g.eb(this.K,"amap-drag");g.g.upa();g.g.m3(); this.V&&(this.V.Ad=!1);this.V.Ep&&(this.V.Ep=!1,this.V.kq.q("dragend",a));this.V.Ar=!1;this.V.Ex=null;this.V.jg=null;g.F.G(document,"mousemove",this.cS,this);g.F.G(document,"mouseup",this.sJ,this);try{g.F.G(window.parent.document,"mouseup",this.sJ,this)}catch(b){}this.Xa&&(this.Of&&(this.vg=this.Of=!1),g.F.pza(this.Xa.$c),this.o7())},Fra:function(a,b){b=b||this.Ni(a,!1,!1,a.srcElement||a.target);var c=this.get("size"),d;0<=b.Bb.x&&b.Bb.x<=c.width&&0<=b.Bb.y&&b.Bb.y<=c.height&&(d=!0);this.E5&&!d?this.q("mouseout", b):!this.E5&&d&&this.q("mouseover",b);this.E5=d},$R:function(a){if(!this.Of&&!this.vg&&this.Xa&&"info"!=a.af&&(g.F.preventDefault(a),g.l.Es&&(a=window.event),a)){a=this.Ni(a,!1,!1,a.srcElement||a.target);var b=this.V,c=a.hd,d;if(c){this.V.Ar||(c instanceof g.C.Hh?d=c.Kb.get("cursor"):c instanceof g.o.Yb&&(d=c.get("cursor")),d&&c!==this||(d=this.B.Ce.defaultCursor),d=this.B.get("optimalCursor")||d,this.K.style.cursor=d||"");d=b.Mga;var e=a.su;d!==e&&(d&&b.QZ&&b.QZ.q("mouseout",a),e&&c&&(c.q("mouseover", a),c.get("topWhenMouseOver")&&(c.Kb.D=!0,c.Kb.setTop(!0),c.Kb.D=!1)));a.hd.q("mousemove",a);a.hd!==this&&this.q("mousemove",a);b.Mga=a.su||null;b.QZ=a.hd||null}}},L4:function(a){if("info"!=a.af&&(this.IG=!0,g.g.Loa(),g.g.Z2(),this.V.Ex=null,this.V.jg=null,"info"!=a.af)){var b=this.Ni(a,!0,!1,a.srcElement||a.target);if(b.hd){this.V.d3=new Date;this.V.$t=b.hd;this.V.ko=b.Bb;this.V.Iga=b.button;this.V.Ar=!0;this.V.Jga=b;this.V.Ad||(this.V.KT=b);this.Je&&this.Je.stop();var c=b.hd;!c.Kb&&c.get("dragEnable")&& (this.V.Ar=!0);g.g.Wa(this.K,"amap-drag");c=!1;b.hd.q("mousedown",b);b.hd!==this&&(this.q("mousedown",b),c=b.hd.get("draggable"));c=c||this.get("dragEnable");g.F.oxa(this.Xa.$c);g.F.h(document,"mousemove",this.cS,this);g.F.h(document,"mouseup",this.sJ,this);try{window.parent.document&&g.l.Es&&g.F.h(window.parent.document,"mouseup",this.sJ,this)}catch(d){}g.F.stopPropagation(a);c&&this.Ena()}}},F6:function(a){this.Fra(a.event,a.UJ)},wDa:function(a){this.cS(a.event,a.UJ)},N4:function(a){if("info"!= a.af){this.UJ=a=this.Ni(a,!1,!1,a.srcElement||a.target);var b=a.hd;if(b){var c=this.B.get("allBubble")||b.get("bubble");b!==document&&(b.q("mouseup",a),a.hd!==this&&c&&this.q("mouseup",a));this.V.ko&&this.Ov(a.Bb,this.V.ko)&&(this.eg&&this.Ov(this.V.Ax,a.Bb)&&a.button===this.V.Iga?(clearTimeout(this.eg),this.eg=null,g.F.K5(a)?c?(b.q("dblclick",a),b!==this&&this.q("dblclick",a)):b.q("dblclick",a):b.q("rdblclick",a),this.V.Ax=null):(g.F.K5(a)?(this.q("clickstart",a),c?(b.q("click",a),b!==this&&this.q("click", a)):(b.q("click",a),this.q("closeOverlays",a)),b.get("topWhenClick")&&(b.Kb.D=!0,b.Kb.setTop(!0),b.Kb.D=!1),this.q("clickend",a)):c?(b.q("rightclick",a),b!==this&&this.q("rightclick",a),this.q("contextmenu",a)):(b.q("rightclick",a),b.q("contextmenu",a)),this.V.Ax=a.Bb,this.eg&&clearTimeout(this.eg),this.eg=setTimeout(g.a.bind(function(){clearTimeout(this.eg);this.eg=null;this.V.Ax=null},this),260)))}}}});g.Rb.Gb({K_:function(a){this.qa("mousewheel",a);var b=this;if(1<=Math.abs(this.V.UC)&&!this.L$){var c=this.V.UC;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.eH(a.Sa,c);this.V.UC=0;this.L$=!0;setTimeout(function(){b.L$=!1;b.V.UC=0},g.l.oz?50:40)}},G_:function(a){this.qa("mousemove",a)},H_:function(a){this.qa("mouseout",a)},I_:function(a){this.qa("mouseover",a)},J_:function(a){this.qa("mouseup",a)},F_:function(a){this.qa("mousedown",a)},L_:function(a){this.qa("rightclick",a)},x_:function(a){this.qa("contextmenu", a)},M_:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.eH(a.Sa,-1);this.qa("rdblclick",a)}});g.Rb.Gb({oga:function(){this.zB={left:[37],right:[39],JQ:[40],bF:[38],Ri:[187,107,61],Si:[189,109,173]};this.jda={left:this.Zx(this.cH(100,0)),right:this.Zx(this.cH(-100,0)),JQ:this.Zx(this.cH(0,-100)),bF:this.Zx(this.cH(0,100)),Ri:this.Zx(this.C1(1)),Si:this.Zx(this.C1(-1))}},xca:function(){this.get("keyboardEnable")&&(this.zB||this.oga(),g.F.h(document,"keydown",this.aH,this),g.F.h(document,"keyup",this.t_,this))},EO:function(){g.F.G(document,"keydown",this.aH,this);g.F.G(document,"keyup",this.t_, this)},t_:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},aH:function(a){var b=a.keyCode,c;for(c in this.zB)if(this.zB.hasOwnProperty(c))for(var d=0;d<this.zB[c].length;d+=1)if(b===this.zB[c][d]){if(!this.IG)return;if(!a.ctrlKey&&!a.shiftKey){this.jda[c]();g.F.preventDefault(a);return}37===b?(this.Rga(),g.F.preventDefault(a)):39===b?(this.Qka(),g.F.preventDefault(a)):38===b?(this.Nja(),g.F.preventDefault(a)):40===b&&(this.Mja(),g.F.preventDefault(a))}},Zx:function(a){return function(){a()}}, Rga:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},Qka:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},Mja:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},Nja:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},C1:function(a){var b=this.B;return function(){b.D=!0;1===a?b.zoomIn():b.zoomOut(); b.D=!1}},cH:function(a,b){var c=this.B;return function(){c.D=!0;c.panBy(a,b);c.D=!1}}}); ');_jsload_('vectorlayer', 'g.kk={d$:function(){0===g.Da.Le&&g.kk.U4()},bIa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Fk===b)return!0},vna:function(a,b){var c="limg-"+a.key+"-"+b.f.mc;g.Da.Ij[c]&&delete g.Da.Ij[c]},O3:function(a){return g.Da.Ij[a.Fk?a.Fk:a]},wm:function(a,b){var c=null,d=null,e=!1,f=g.Da.Ij;a.Fk?(c=a,d=c.Fk,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h){var e=function(a){this.tJ(a);g.a.Sh(b)&&b(!0,{yJ:a.target})},k=function(a){this.T4(a);g.a.Sh(b)&&b(!1, {yJ:a.target})};if(a){var l="data:"===a.substr(0,5),h=document.createElement("img");l||(h.crossOrigin="Anonymous");f[d]=h;h.loaded=!1;g.Da.Le+=1;g.F.Fj(h,"load",e,this);g.F.Fj(h,"error",k,this);var m=this;h.hr=g.a.hg();l||void 0!==this.jQ||(this.jQ=setInterval(function(){if(0===g.Da.Le||0===g.Da.lr.length)clearInterval(m.jQ),m.jQ=void 0;else{var a=g.a.hg(),b=g.Da.Ij,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.hr&&(c=e.timeout=!0)}c&&m.U4()}},100));h.src=a; c&&(h.BCa=d)}}},U4:function(){for(var a=0;a<g.Da.lr.length;a+=1)g.Da.lr[a].set("display")},x2:function(a){g.F.G(a,"load",this.tJ,this);g.F.G(a,"error",this.T4,this)},tJ:function(a){a=a.target;a.loaded=!0;g.Da.Le-=1;this.x2(a);this.d$()},T4:function(a){a=a.target;a.loaded=!1;g.Da.Le-=1;this.x2(a);this.d$()}};g.o.hi=g.o.Yb.extend({A:function(a,b,c){this.Xl=c;g.Da.lr.push(this);this.mc=g.a.d4("layer");this.Ta=2;a.get("textRatio");this.bW=25;this.X("tiles",a);this.Eza=a.get("vdataUrl")||b.B.get("vdataUrl")||g.r.AL;this.Fi=!0;this.S=a;this.Pk=g.l.ba?!1:!0;this.e=b;this.aj=this.$i=!0;this.bf("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.bf("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.FL=new Image,this.FL.src=this.get("watermark"));this.yL="v4";this.oa={};this.fm={};this.Dd=256;this.Jv=[];this.Df=this.mg=0;this.ja=g.l.ja&&this.get("detectRetina");this.Dd=256*(this.ja?2:1);this.X("mapStyle",b);this.X("style",b);this.eq=0;this.X("features",b);this.gf=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.ze=!!this.e.get("showBuildingBlock");this.featuresChanged()},featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload"); this.S.$s()},ula:function(){var a=!1,b=this.YY();if(b){if(this.Yi){var c="active"===this.Yi.qB;b.WA(this.Yi);c&&(b.Vt(this.Yi,"active"),a=!0)}g.l.pna&&!a&&b.BH()}},NA:function(){this.ula()},YE:function(a,b){var c=!0;if("hotspotout"===a)this.e.B.set("optimalCursor",null);else if("hotspotover"===a)this.e.B.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.YY();if(d)switch(a){case "hotspotout":d.GH(b);break;case "hotspotover":d.Vt(b,"hover");break;case "mouseup":d.Vt(b, "hoverup");break;case "mousedown":d.Vt(b,"active")}c&&(c=b.za,c=new g.H(c[0],c[1]),c=this.e.Od(c,3),this.e.B.q(a,{name:b.name,lnglat:c,id:b.Ws,isIndoorPOI:b.G5}))},YY:function(){if(!g.l.g5){var a=this.M||this.Ef;if(!a)return null;var b=this.e?this.e.B.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.eC||(this.eC=new g.o.hi.oba(a));return this.eC}},Dr:function(a){(a=this.p4(a))&&this.YE("hotspotclick",a)},Kx:function(a){var b="mousemove"===a.type;if(!this.e.vg||!b){var c= this.p4(a);c&&c.nk||(c=null);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.Yi!==c&&(this.Yi&&this.YE("hotspotout",this.Yi),this.YE("hotspotover",c)),!c&&this.Yi&&this.YE("hotspotout",this.Yi),c&&!b&&this.YE(a.type,c)}this.Yi=c}},textIndexChanged:function(){this.set("display")},Qua:function(){this.e.h("click",this.Dr,this);this.e.h("mousemove",this.Kx,this);this.e.h("mousedown",this.Kx,this);this.e.h("mouseup",this.Kx,this)},nQ:function(){this.e.G("click",this.Dr,this);this.e.G("mousemove", this.Kx,this);this.e.G("mousedown",this.Kx,this);this.e.G("mouseup",this.Kx,this)},Qo:function(){return null},le:function(){var a=this.wv?null:this.e.B.get("forceZooms");return{Fi:!0,Dd:256,visible:this.get("visible"),ro:this.ro,Ya:a||this.get("zooms"),bI:this.Pk&&this.La,$i:!this.e.ot,aj:!this.e.ot,opacity:this.get("opacity"),Kc:!1,Oc:this.Bn()}},am:function(a){if(g.M.canvas.hi)return new g.M.canvas.hi(this,a)},BC:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")|| g.l.ba&&!this.ja?"6":"5";this.url=g.r.vc+"://"+this.Eza+"/tiles?mapType="+a+"&v="+(g.Ve?3:2)+"&style="+b;this.url+="&key="+g.r.key;this.url+="&version="+g.r.nn;this.url+=this.ja?"&rd=2":"&rd=1";this.url+="&flds="+this.ga;this.url+="&t="},styleChanged:function(){this.e.Bd||this.featuresChanged()}}); g.o.od=g.o.hi.extend({am:function(a){var b=this;if(!b.FL&&g.l.Sf&&"vw"===b.e.get("baseRender")){var c=["wgl"];this.e.Bd&&c.push("wgl2");if(g.sb.ID(c))return new g.M.Ye.od(b,a)}else if(c=["cgl"],this.e.Bd&&c.push("cgl2"),g.sb.ID(c))return new g.M.canvas.od(b,a);g.sb.Jg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.Xl:a&&(-1!==g.a.indexOf(a,"bg")&&-1!==g.a.indexOf(this.Xl,"region")&&b.push("region"),-1!==g.a.indexOf(a,"building")&&-1!== g.a.indexOf(this.Xl,"building")&&b.push("building"),-1!==g.a.indexOf(a,"road")&&-1!==g.a.indexOf(this.Xl,"road")&&b.push("road"));this.ga=b;this.BC(this.get("mapStyle")||"normal");this.set("reload")}});g.o.Cba=g.o.od.extend({A:function(){this.Fh(arguments);this.gf=this.Zo=17;this.ga=["building"];this.ze=!0;this.BC(this.get("mapStyle")||"normal");this.wv=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.o.Sj=g.o.hi.extend({am:function(a){this.bh=!0;var b=this;if(this.sS()){if(this.jA=!0,g.M.canvas.sM)return this.d2(),a=new g.M.canvas.sM(this,a),a.h("afterLabelRender",this.NA,this),a}else{b.jA=!1;if(g.M.canvas.rM)return a=new g.M.canvas.rM(this,a),a.h("afterLabelRender",this.NA,this),a;g.sb.Jg(["labelcanvas"],function(){b.set("display")})}},sS:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")?!1:g.l.jA?!0:!1},Yra:function(){var a=this.get("mapStyle"); return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")||g.l.Kc||g.l.ba?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.a.indexOf(a,"point")&&c.push("poilabel"));a=this.sS();c.length&&(a||this.Yra())&&c.unshift("limg");this.ga=c;this.BC(b);this.set("reload");(b=this.M||this.Ef)&&a^this.jA&&(this.eC&&(this.eC=this.eC.M=null),b.G("afterLabelRender",this.NA, this),b.ck(),this.Ef=this.M=null)},d2:function(){this.Bv=g.r.vc+"://"+(this.S.get("vdataUrl")||this.e.B.get("vdataUrl")||g.r.AL)+"/limg?";var a=this.ja?2:1;this.Bv+="&font="+(g.l.ba&&!this.ja?"big":"small");this.Bv+="&scl="+a;this.Bv+="&t="},p4:function(a){return a.Tf?(a=this.Y3(this.e.lc(a.Tf,20),!0))?a[0]:null:null},Y3:function(a,b){var c=this.e.Oy();if(c&&(c=c.zs(this)))return c.zn(a,b)}});g.o.hi.oba=g.da.extend({A:function(a){this.Zka(a)},Zka:function(a){this.M=a},GH:function(a){if(a.qB){a.qB=!1;var b=this.M;b&&b.GH.apply(b,arguments)}},WA:function(a){a.qB=!1;var b=this.M;b&&b.WA.apply(b,arguments)},Vt:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.qB!==b){a.qB=b;var c=this.M;c&&c.Vt.apply(c,arguments)}},BH:function(){var a=this.M;a&&a.BH()}});g.o.Zw=g.da.extend({A:function(){this.Ta=2;this.bW=g.l.Yl?16:12;this.cxa={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.lw=[new g.sg,new g.sg,new g.sg,new g.sg,new g.sg,new g.sg,new g.sg];this.Gza=[{type:"roadlabel",show:!0,Ei:1},{type:"poilabel",show:!0,Ei:1},null,{type:"region",show:!0,Ei:0},{type:"road",show:!0,Ei:0},{type:"building",show:!0,Ei:0},null];this.eq=0},uy:function(a,b,c,d,e){if("first"!==b){c&&(c.Md=d);var f;switch(e){case "roadlabel":f=0;break;case "poilabel":f=1;break;case "labels":f= 2;break;case "region":f=3;break;case "road":f=4;break;case "building":f=5;break;case "allbase":f=6}d=this.lw[f].nza;c&&c.Ke&&(d=this.lw[f].push);"groupcomplete"===b?d.call(this.lw[f],["groupcomplete",f,c,a]):"tileComplete"===b?d.call(this.lw[f],["co",7,c,a]):(d.call(this.lw[f],["co",f,c,a]),""!==b&&d.call(this.lw[f],[b,f,c,a]));this.eq>f&&(this.eq=f);this.Vxa()}},D7:function(){var a=new Date,b=!1;do if(b=this.parse(),new Date-a>=this.bW)break;while(!b);this.v7=b?null:g.a.Yc(this.D7,this)},Vxa:function(){this.v7|| (this.v7=g.a.Yc(this.D7,this))},koa:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.eq,d=this.lw[this.eq];if(d.xh())6===c&&(b=!0),this.eq=(this.eq+1)%7;else{a=d.pua();var e=a[3],f=e.ja?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2];if(e.oa.Ld(h.key))if("co"===a[0])if(3===a[1])this.LT(e,h,f),h.ra.region&&e.Za.NK(h.ra.region,0,h.ta.z);else if(4===a[1])this.LT(e,h,f),h.ra.road&&e.Za.u8(h.ra.road,h.ta.z);else if(5===a[1]&&h.ra&&h.ra.building)a= g.Pj&&g.Pj.F5(e.e.B),e.ze?h.vf=h.ra.building:(this.LT(e,h,f),e.Za.NK(h.ra.building,1,h.ta.z,void 0,a));else{if(7===a[1]){h.Fe&&(e.FL&&0===(h.ta.x+h.ta.y)%2&&h.Fe.getContext("2d").drawImage(e.FL,0,0),h.rma=!0,g.l.ED&&h.Fe.toDataURL&&(f=new Image,f.src=h.Fe.toDataURL(),h.Fe=f));if("3D"===this.Kf){if(h.nl){h.nl.cf=null;h.Xh=null;a=e.e.Hc;if(e.Ef&&a.Ef){c=a.Ef.dI(a.Ef.ca,h.nl);c.mc=a.Ef.mc;a={pi:c,tagName:"CANVAS",width:h.nl.width,height:h.nl.height};c=0;for(f=h.ga.length;c<f;c+=1)for(var k=h.ga[c],l= 0,m=k.Da.length;l<m;l+=1)k.Da[l]==h.nl&&(k.Da[l]=a);h.ga.qya=!0}h.nl=null}}else a[3].e.J.Pf&&this.B3(h);h.qua||(h.La=h.Ba=!0);e.set("display")}}else g.Iaa.qva(h,a[0],this.Gza[a[1]].type,e)}d.xh()&&(6===c&&(b=!0),this.eq=(this.eq+1)%7)}return b},LT:function(a,b,c){a.Za||(a.Za=new g.M.canvas.od.ed(a),a.Za.J=a.e.J);var d=1;18==b.ta.z&&(d=a.S.get("map",null,!0).get("zooms")[1],d=Math.pow(2,18-d));b.Fe||(b.Fe=this.koa(),b.Fe.width=b.Fe.height=c/d,b.rma=!1);b.Fe&&(a.Za.xa=b.Fe,a.Za.Kg=d,a.Za.Qb=1/d)},B3:function(a){if(a.ga)for(var b= 0,c=a.ga.length;b<c;b++){var d=a.ga[b];if(d.nk){var e=this.Ud(d),f=d.Da.length;if(d.rc)for(var h=0,k=d.rc.length;h<k;h++)this.Yma(d,h,e,f)}}},Yma:function(a,b,c,d){d+=b;var e=a.rc[b][8],f=a.fontSize,h=a.wI,k=parseInt(f/h*e[2]),l=e[3]+f-h,m=k-e[2],f=f-h;switch(c){case "middle":a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2;break;case "left":a.aa[d][0]=e[0]-(k-e[2])/2+m/2;a.aa[d][1]=e[1]-(l-e[3])/2+f*b;break;case "right":a.aa[d][0]=e[0]-(k-e[2])/2-m/2;a.aa[d][1]=e[1]-(l-e[3])/2+f*b;break;case "top":a.aa[d][0]= e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2+(2*b+1)/2*f;break;case "bottom":b=(2*(a.rc.length-b-1)+1)/2*f;a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2-b;break;default:a.aa[d][0]=e[0]-(k-e[2])/2,a.aa[d][1]=e[1]-(l-e[3])/2}a.aa[d][2]=k;a.aa[d][3]=l},pD:function(a){return Math.abs(a[2]/2+a[0])},qD:function(a){return Math.abs(a[3]/2+a[1])},Ud:function(a){var b=a.aa;if(1===b.length)return"";var c=b[0],d=b[1];return b.length===a.Da.length?"top":1>=this.pD(c)&&1>=this.pD(d)?1>=this.qD(c)&&1>=this.qD(d)? "middle":c[1]<d[1]?"top":"bottom":c[0]<d[0]?"left":"right"}});g.o.Zw.Di=new g.o.Zw;g.Yw={zC:function(a,b){this.e.B.xq&&(this.xg={},this.xg.SEa=g.a.xb(this.xg),b.Lc||(b.Lc=g.EW()),this.Lc=b.Lc,this.Lc.h("tiles",this.bE,this),this.Lc.h("ack",this.aE,this),this.Lc.h("disable",this.ZD,this))},mza:function(){this.e.B.xq&&(this.xg=null,this.Lc&&(this.Lc.G("tiles",this.bE,this),this.Lc.G("ack",this.aE,this),this.Lc.G("disable",this.ZD,this),this.Lc=null))},Yx:function(){if(!1===this.e.B.get("workerMode"))return!1;g.Nk.t5||this.uZ(g.Nk);g.Fc.t5||(this.uZ(g.Fc),g.Fc.xS&&B.event.by(this.e.B, "complete",function(){g.Fc.xS()}));if(this.bh&&!this.Uo&&g.Nk.Iza||this.Uo&&g.Nk.cta||!this.Uo&&!this.bh&&this.Fi&&g.Fc.p5)return!0},uZ:function(a){a.yf(null,{Ve:g.Ve});a.t5=!0},Yga:function(a){g.a.Tb(a,function(a){g.kk.wm(a)})},Az:function(a){if(this.f&&a.PS===this.f.mc){this.fe||this.hf?this.QB([this.f,"groupcomplete",null,null,"allbase"]):(this.ek(),this.Xj.uy(this.f,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Pc.length;b<c;b+=1)this.cE(a.Pc[b],a.kz,a.Sq,a.ba)}},cE:function(a,b){var c= a.Ed,d=this.oa.get(a.Qi);if(d){var e=this.f.ga,f="";(this.e.Dm&&!this.e.Bd||this.e.Bd)&&this.SI(c,a.Oa,a.Lg.z);"poilabel"===c||"roadlabel"===c?(a.qd||(f=a.Oa,a.qd=null),d.ga||(d.ga=[]),d.ga.push.apply(d.ga,a.Oa),c===this.f.ga[this.f.ga.length-1]&&(d.qd=null)):d.ra[c]=a.Oa;"building"!==c&&"poilabel"!==c||!a.En||d.oe||(d.oe={},d.oe.vf=a.En,g.Oj&&g.Oj.q("vecTileParsed.buildings",{rp:d}));if("roadlabel"!==c&&"poilabel"!==c||this.y5||!g.l.h3&&!this.e.Bd)this.fe||this.hf?this.QB([this.f,f,d,b,c]):(this.ek(), this.Xj.uy(this.f,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.fe||this.hf?this.QB([this.f,"tileComplete",d,b,c]):(this.ek(),this.Xj.uy(this.f,"tileComplete",d,b,c)))}},aG:function(){if(this.e){var a=this.e.B.getMapStyle();this.Eq=a;this.Cga(a);this.Lc&&this.Lc.O5()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:g.l.ba&&!this.f.ja?"6":"5",rd:this.f.ja?2:1}},this.Yx()?(g.Fc.$ma(a,g.a.Rs),this.Lc.bFa()||this.Lc.close()): this.Lc.send(a))}},mapStyleChanged:function(){this.aG()},styleChanged:function(){this.aG()},ZD:function(){for(var a in this.xg)this.xg.hasOwnProperty(a)&&this.xg[a].Hb&&(this.Ml(this.xg[a].Hb,this.xg[a].Md),delete this.xg[a]);this.Lc=null;this.zl("mapStyle");this.set("display",1)},aE:function(a){var b=a.reqId;this.xg[b]&&(!a.content.status&&this.xg[b]&&this.Ml(this.xg[b].Hb,this.xg[b].Md),delete this.xg[b])},bE:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.bC())&&this.xg[b]){var c=a.content.opt, d=this.xg[b].Hb[0];c!==this.fb&&!d.Ke||d.Ke&&2<(this.bC()||Math.abs(c-this.fb))?this.Ml(this.xg[b].Hb,this.xg[b].Md):this.Us(a.content.data,c)}},D1:function(a,b){if(g.Qj){var c=a.Vg,c={"x-vd-v":c.df,tv:c.Qh,bgc:this.e.De,vdataVersion:c.mf,url:this.Ky(a.Md,[]),o:this.f,ze:this.e.B.get("showBuildingBlock")};b?a.Hb.length&&(c.qd=!0,c.data=g.a.map(a.Hb,function(a){return{key:a.key,data:JSON.stringify({key:a.key,qd:a.qd,ga:a.ga,oe:a.oe})}})):this.zV||(c.Sf=!!this.ok,c.Pc=this.ok||this.Fi?a.Gu:a.data.Pc); g.Qj.set(c)}},XS:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(this.bh&&"zh_cn"!==this.lang)for(var d=0;d<a.length;d+=1)a[d].status="loaded",a[d].Ba=!0;else{var e=[],f=this;this.aka(a,b,g.a.bind(function(a,d){var f=this;if(d.length){for(var m=0,n=d.length;m<n;m++){var p=d[m].ta,q=p.x,r=p.y,p=p.z;if(10>p){var s=Math.pow(2,p);if(q>=s||0>q)q=(q+s)%s}q=g.a.II(q,r,p).join(",");g.a.ka(e,q)||e.push(q)}if(this.Yx())if(m=this.Rea({xya:d,Ke:c,Md:b,hr:e}),m.yCa=(new Date).getTime(), this.bh)g.Nk.Ah(m,function(a,c){if(f.e)if(c.N5){var d=c.Hb.map(function(a){return f.oa.get(a.key)}).filter(function(a){return a});f.Ml(d,b)}else c.ll&&f.sH(),f.Uo?(g.a.Tb(c.Hb,function(a){this.oa.set(a.key,a);a.qd&&!a.qd.loaded&&(g.kk.wm(a.qd),a.qd.loaded=!0);a.oe&&a.oe.vf&&g.Oj&&g.Oj.q("vecTileParsed.buildings",{rp:a})},f),f.set("display"),f.D1(c,!0)):(g.a.Tb(c.Hb,function(a){var b=this.oa.get(a.key);b&&(b.status=a.status,a.L&&a.L.Da&&this.Yga(a.L.Da))},f),c.data&&f.Az(c.data))});else{var u=g.Fc.n6; this.e.B.La&&!g.Fc.Moa&&this.e.B.xq||(u=g.Fc.Ah);this.aG();u(m,function(a,c){if(f.e){if(c.N5){var d=c.Hb.map(function(a){return f.oa.get(a.key)}).filter(function(a){return a});f.Ml(d,b)}if(u===g.Fc.n6){if(c.disabled){g.Fc.Moa=!0;f.set("display");return}if(c.Kla)return}c.ll&&f.sH();c.data&&(f.e.De!==c.Du&&(f.e.De=c.Du),g.a.Tb(c.Hb,function(a){var b=this.oa.get(a.key);b&&(b.status=a.status)},f),f.D1(c),c.data&&f.Az(c.data))}})}else!this.bh&&this.Lc&&this.Lc.O5()?this.e.B.get("workerMode")?this.RG(d, b,e,c):(1>this.Lc.za.length||3<this.pu?this.RG(d,b,e,c):((2===this.Lc.za.length||this.Lc.GJ())&&this.aG(),this.$ga(d,b,e,c)),this.Lc.oHa(this.Lc.za.length+1),this.Lc.c6&&this.Lc.ECa(Math.ceil((new Date-this.Lc.c6)/1E3)),this.Lc.c6=new Date):this.RG(d,b,e,c)}},this));window.renderDelay&&(this.LK=setTimeout(function(){f.cK&&f.set("display",!1);f.cK=!1;f.LK=null},window.renderDelay))}},Cga:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.zV=!0:this.zV=!1},aka:function(a,b,c){var d=g.Qj; if(d&&!this.zV&&18>=b){var e=this,f=this.e,h=f.B;f.LD||void 0!==f.QJ||("dv"===h.get("baseRender")?f.QJ=1:f.QJ=2);d.get({type:h.La?"NFS":"FS",ze:this.f.wv||this.f.ze,sya:a,Sf:!!this.ok,o:this.f,url:this.Ky(b,[]),timeout:1E3},function(d,h){if(e.f){if(d)return c(null,a);h.D6.length&&c(null,h.D6);if(h.lS.length)if(h.lS.length===a.length&&(f.LD&&(f.QJ--,e.sH()),e.e.B.La||e.bh||e.FD||e.e.cU()),h.Pc){e.df=h.Vg["x-vd-v"];e.Qh=h.Vg.tv;var m=h.Vg.bgc;e.e.De!==m&&(e.e.De=m);g.a.forEach(h.lS,function(a){a.status= "loaded"});e.z7(h.Pc,b)}else h.j6&&(g.a.forEach(h.j6,function(a){var b=e.oa.get(a.key);if(b){b.status="loaded";b.oe=a.oe;if(a.qd){b.qd=a.qd;b.ga=a.ga;var c="limg-"+a.key+"-"+e.f.mc;b.qd.Fk=c;b.ga&&(g.a.forEach(b.ga,function(a){a.Da&&g.a.forEach(a.Da,function(b,d){b&&0===b.indexOf("limg-")&&(a.Da[d]=c)})}),g.kk.wm(b.qd),b.qd.loaded=!0)}b.oe&&b.oe.vf&&g.Oj&&g.Oj.q("vecTileParsed.buildings",{rp:b});b.Ba=b.La=!0;e.oa.set(a.key,b)}}),e.set("display"))}})}else c(null,a)},$ga:function(a,b,c,d){if(!d||!this.bC()){var e= [(new Date).getTime(),this.Lc.za.length+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.f.ga.join(","),v:g.Ve?"3":"2"}}},h;if(!this.Lc.GJ()){var k=this;setTimeout(function(){k.Lc&&!k.Lc.GJ()&&(k.pu?k.pu++:k.pu=1,k.Lc.npa(h)&&(delete k.xg[e],k.RG(a,b,c,d)))},300)}h=this.Lc.send(f);this.xg[e]={Hb:a,Md:b}}},oT:function(a){if(!a.La||a.Ke)a.status="",a.La=void 0,a.Ba=null,a.Fe=null,this.oa.yw(a.key)},Rea:function(a){var b=a.xya,c=a.Md,d=a.hr;a=a.Ke;return{mc:+new Date+ "_"+Math.random(),Du:this.e.De,Bd:this.e.Bd,bh:this.bh,Uo:this.Uo,ze:this.f.ze,vsa:!!g.Ve,Kf:this.J.type,Sf:this.ok,OS:this.f.mc,ga:this.f.ga,Kc:this.f.ja,Ta:this.f.Ta,ZR:Math.ceil(this.sk.Uy),Hb:g.a.filter(b,function(a){return"loaded"!==a.status}),Md:c,hr:d,Ke:a,url:this.Ky(c,d,b),Eh:this.TY(c,[]),HFa:this.e.B.La}},TY:function(a,b){return{AS:"3D"===this.J.type,aQ:this.f.ze,Vr:g.r.Vr||null,VCa:this.f.get("businessIconsID"),df:this.df,Bd:this.e.Bd,Qh:this.Qh,REa:this.f.get("iconsID"),PS:this.f.mc, kz:a,Yy:this.f.Yy,Af:!this.f.Bn()&&this.f.S.get("merge"),Pc:b,ba:this.f.get("forceBig")||g.l.ba,Kf:this.J.type,mode:this.f.get("mode"),Yva:g.r.vc,z8:this.f.get("forceBig")?1:this.f.Ta,Sq:this.f.get("forceBig")?!1:this.f.ja,fy:this.f.get("forceBig")||g.l.ba&&!this.f.ja?1:0}},bB:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},z7:function(a,b){if(a.length){var c=this,d=null;this.ok?(d=g.Fc,d=d.parseDataToWebGL): d=this.bh?g.Nk.parseLabel:g.Fc.parseDataToVector;var e=c.TY(b,a);e.Ve=g.Ve;d&&d instanceof Function&&d(e,function(a,b){if(c.f&&!a){var d=b.icons;if(d)for(var e=0;e<d.length;e+=1)g.kk.wm(d[e]);b.data&&c.Az(b.data)}})}},Us:function(a,b,c){if(this.f){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.df=h["x-vd-v"],this.Qh=h.tv,this.mf=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.e.De!==h&&(this.e.De=h))):this.$D(h,b,d))}this.z7(d,b)}},$D:function(a, b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.ok&&(e+="/"+b);if((d=l.oa.get(e))&&"loaded"!==d.status)if(l.R9(d,p)||d.Ke){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.qd=e,"string"===typeof e.b&&(e.b=l.bB(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,Fk:"limg-"+d.key+"-"+l.f.mc},e.u=d,g.kk.wm(d)}else{e={Lg:d.ta,Qi:e,Oa:a,Ed:m,Yy:l.f.Yy,iy:l.e.De,FD:"building"===m,Ei:"poilabel"===m||"roadlabel"===m||"building"===m&&l.f.ze};if("poilabel"===m||"roadlabel"===m)e.qd=d.qd;m===n[n.length- 1]&&(d.status="loaded");c.push(e)}}else l.FU(b,d,p,g.a.bind(l.oT,l))}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.f.ga,p=18<b?Math.pow(2,b-18):1,e=l.sk.Uy,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},QB:function(a){this.vu||(this.vu=[]);this.vu.push(a)},ek:function(){if(this.vu&&this.vu.length){for(var a=0,b=this.vu.length;a<b;a+=1)this.Xj.uy.apply(this.Xj,this.vu[a]);this.vu=[]}},Ml:function(a,b){for(var c=18<b?Math.pow(2, b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.FU(b,e,c,g.a.bind(this.oT,this));18<b&&this.oa.yw(e.key+"/"+b)}g.Qj&&g.Qj.yw({Hb:a,url:this.Ky(b,[]),o:this.f,Sf:!!this.ok,ze:this.f.ze})},Ky:function(a,b,c){return this.f.url+b.join(";")+"&lv="+a+"&key="+g.r.key+"&preload="+(c&&c[0]&&c[0].Ke?1:0)},yfa:function(){var a=this.f.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},sH:function(){this.e.LD||g.Be.nf.end({key:this.yfa(),index:0,id:this.e.B.id})},RG:function(a,b,c){function d(a, c){var d=a.split("|");d[0]=c+d[0];var e=d,f="";d[d.length-1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.Us(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.xE=[(new Date).getTime(),e?1:0].join("-");var e=this.Ky(b,c,a),h=0,k=this;f.Oq="";f.onreadystatechange=function(){if(k.f&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status;b!==k.fb&&c&&!f.Mt?(f.Mt=!0,k.Ml(a,b),f.onreadystatechange="",c||f.abort()):f.Mt||(3===f.readyState?(c=f.responseText.substring(h), f.Oq=d(c,f.Oq),h=f.responseText.length):4===f.readyState&&(k.sH(),c=f.responseText.substring(h),k.bh&&(c+="|"),d(c,f.Oq),f.Oq="",k.e.B.La||g.Be.nf.push({id:k.e.B.id,key:"ds",If:f.responseText.length/2})))}};f.onerror=function(){};this.Gra||(this.Gra=1);f.open("GET",e,!0);f.send()},R9:function(a,b){var c=this.Gw||this.sk,d=a.ta.x,e=a.ta.y;return d>Math.floor(c.Ic/b)||d<Math.floor(c.Jc/b)||e>Math.floor(c.tc/b)||e<Math.floor(c.hc/b)?!1:!0},FU:function(a,b,c,d){d(b)}};g.M.canvas.Sj=g.M.Vi.extend({ka:[g.Yw],A:function(a,b){arguments.callee.ma.apply(this,arguments);this.mc=g.a.xb(this);this.bo=300;this.gf=a.gf;this.bh=this.Fi=!0;this.X("mapStyle",a.e);this.X("style",a.e);this.Uo=!0;this.Tx=1;var c=this;this.nZ=function(){c.P6=!0;c.set("display",0)};this.$g();this.TS(a)},TS:function(a){a=g.l.ba||a.ja?"big":"small";var b=g.r.vc+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";g.kk.wm(g.r.vc+"://vdata.amap.com/style_icon/icon-normal-"+a+".png");g.kk.wm(b)},cB:function(a){g.kk.vna(a, this);var b=g.M.canvas.Sj.bd.cB;b&&b.apply(this,arguments)},$g:function(){this.$m=document.createElement("canvas");this.$m.className="amap-labels";this.$m.draggable=!1;this.$m.J5=!0;this.Vk=this.$m.getContext("2d",{alpha:!0});this.d6=[];this.Bs=10},Wv:function(a){var b=Math.pow(2,a.P.zoom-this.me),c=this.f.ja?this.f.Ta:1,d=a.P.lb.ab(this.Js).kd(this.Kg);this.transform={translate:this.transform.translate.add(d.Nd(c)),scale:b/c,rotate:0};this.lb=a.P.lb},Mz:function(a,b){this.Na=this.J.Na;this.xe=!1; this.currentTime=+new Date;this.AV=b.AV;this.ee=[this.Ha.kc.x,this.Ha.kc.y];this.Pk=b.bI;var c=this.Mg;this.fe=this.zoom<<0!==this.zoom;var d=this.lb.ab(this.Na);d.x<-g.a.Fa/2&&(d.x+=g.a.Fa);d.x>g.a.Fa/2&&(d.x-=g.a.Fa);this.fQ=d.kd(this.Kg);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].ta.z,h=!1;if(e.zg&&!g.Da.Le&&("stable"==this.Lf||f<=this.zoom&&"zoomIn"===this.Lf||f>=this.zoom&&"zoomOut"===this.Lf)&&(!this.labels||!this.labels.length||this.MJ||a.Hi||!this.pE(this.labels.Ak,this.sk)|| this.zJ(a)||this.se!==a.se)){h=!0;h=[];a.se&&(h.push.apply(h,a.se),this.se=a.se);a.nb.length?(h.push.apply(h,a.nb),this.SN=a.nb.iI):this.SN=null;for(var k=e.length-1;0<=k;k-=1){var l=e[k],m=!1,n=l.ga;l.qe&&(l.qe=!1,this.SI("poilabel",l.ga,void 0,!0),this.Xj.B3(l));!n&&l.Pb&&l.Pb.ga&&(n=l.Pb.ga,m=!0);if(n)for(var p=0,l=n.length;p<l;p+=1){n[p].reverse=m;var q=!1,r=n[p].za;this.SN&&g.a.Tb(this.SN,function(a){!q&&g.wd.Sd(r,a.Vf[0].za)&&(q=!0)});q||h.push(n[p])}}e=[];k={};if(h.length)for(m=0,l=h.length;m< l;m++)h[m].id in k||(k[h[m].id]=1,e.push(h[m]));e.zoom=f;this.dT(e);e.sort(function(a,b){return a.zIndex!==b.zIndex?a.zIndex>b.zIndex?-1:1:!a.Cd^!b.Cd?a.Cd?1:-1:a.Cd==b.Cd?a.id==b.id?a.re==b.re?a.name<b.name?-1:1:a.re>b.re?-1:1:a.id<b.id?-1:1:a.Cd>b.Cd?-1:1});this.labels=e;this.labels.Ak=this.sk;this.MJ=!1}}}if(this.iQ(a)){this.zd();if(!this.e.B.La)return;this.iU(a);this.uh=this.labels}this.P6=!1;this.Pe(a)},dT:function(a){this.labels&&this.labels.opacity||(this.labels=[],this.labels.opacity={}); for(var b={},c=0;c<a.length;c+=1){var d=a[c].id;d&&(d in this.labels.opacity?(b[d]=this.labels.opacity[d],delete this.labels.opacity[d]):b[d]=0,a[c].Aj=!0)}for(var c=0,e=this.labels.length;c<e;c+=1)d=this.labels[c].id,this.labels.opacity[d]&&(a.push(this.labels[c]),b[d]=this.labels.opacity[d],this.labels[c].Aj=!1);a.opacity=b},zd:function(){if(this.zg&&!this.f.La){var a=this.f;g.Be.nf.end({id:this.e.B.id,key:"rl",index:2});a.La=!0;a.Jd?a.qa("renderComplete"):(a.Jd=!0,a.qa("complete"))}},pc:function(a, b){this.lang=a.lang;this.Eq=a.Eq;this.sp=a.sp;this.hp(a,b);this.fe||this.ek();this.Js&&(a.oL||a.SE&&g.l.Yl||a.hf&&!a.fe&&a.S1)?this.Wv(a,b):this.Mz(a,b);this.Js=this.lb;this.xe&&this.set("display",0);this.NS=this.Lf},Pe:function(a){var b=this.lb.ab(this.Na);b.x<-g.a.Fa/2&&(b.x+=g.a.Fa);b.x>g.a.Fa/2&&(b.x-=g.a.Fa);this.transform={translate:new g.H(a.P.Ha.Bc.x*(this.f.ja?this.f.Ta:1),a.P.Ha.Bc.y*(this.f.ja?this.f.Ta:1)),scale:1/(this.f.ja?this.f.Ta:1),rotate:0}},pE:function(a,b){return a.hc===b.hc&& a.Jc===b.Jc&&a.tc===b.tc&&a.Ic===b.Ic},zn:function(a,b){var c;if(this.zoom){var d=a.kd(Math.pow(2,20-this.zoom));this.labels&&(c=this.Eqa(d,b))&&(c.G5=!1);!c&&this.nb&&(c=this.Dqa(d))&&(c.G5=!0)}return c?[c]:[]},Eqa:function(a,b){for(var c=a.x,d=a.y,e=this.labels.uFa||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.za[0]/this.T,l=h.za[1]/this.T;if((h.Ws||!b)&&this.C5(h,c,d,k,l))return h}},Dqa:function(a){var b=a.x;a=a.y;for(var c=this.nb.length-1;0<=c;c-=1){var d=this.nb[c],e=d.za[0]/this.T,f= d.za[1]/this.T;if(d.Ws&&this.C5(d,b,a,e,f))return d}},C5:function(a,b,c,d,e){for(var f=0;f<a.aa.length;f+=1){var h=a.aa[f][2],k=a.aa[f][3],l=a.aa[f][0],m=a.aa[f][1];this.f.ja&&(h/=this.f.Ta,k/=this.f.Ta,l/=this.f.Ta,m/=this.f.Ta);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.f&&(this.f.La=!1);this.oa.count&&(this.oa.clear(),g.Qj&&g.Qj.clear());this.labels=[];this.d6=[];this.Mb&&this.Mb.parentNode&&this.Mb.parentNode.removeChild(this.Mb);this.$m&&this.$m.parentNode&& this.$m.parentNode.removeChild(this.$m);this.set("display")},yj:function(){return this.$m},reCalcLabelPos:function(){this.oa&&this.oa.forEach(function(a){a.qe=!0})},styleChanged:function(){this.reCalcLabelPos&&this.reCalcLabelPos()},SI:function(a,b,c,d){if(b&&("roadlabel"===a||"poilabel"===a))for(a=0;a<b.length;a+=1){var e=b[a];if((!d||e.nk)&&e.ec){var f="",h="",k="";e.rc&&(k=e.rc[0],f=k[3],h=k[4],k=e.Dj?"":k[7]);if(f=this.J.My&&this.J.My(f,h,k,e.ec,e.Su,c))if(e.visible=f[4],e.zk=f[3],e.vd=f[0],e.rc)for(h= 0;h<e.rc.length;h+=1)k=e.rc[h],k[3]=f[0],k[4]=f[1],e.nk&&(k[7]=f[2],e.wI||(e.wI=k[2]),e.fontSize=f[6]?f[6]:k[2])}}}});g.tM={Ky:function(a,b,c){return this.f.Bv+b.join(";")+"&lv="+a+"&key="+g.r.key+"&preload="+(c&&c[0]&&c[0].Ke?1:0)},Us:function(a,b){if(this.f){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.df=h["x-vd-v"],this.mf=[h.tv||"",h.vdv].join("-"),this.Qh=h.tv,this.e.De="#"+h.bgc.substring(2)):(h=this.$D(h,b,c,this.df||"v4"))&&d.push(h))}this.set("display")}},Gz:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.T;return[(c+a[0])*e,(d+a[1])*e]},$D:function(a, b,c,d,e){function f(c,f,m){c=[m,c,f].join("/");if(c=q.oa.get(c)){f=c.ta;var n="3D"==q.J.type?0:-3;if(c&&"loaded"!==c.status)if(q.R9(c,u)||c.Ke){if(-1!==s.indexOf(r))if("limg"===r)a[1]&&(c.qd={url:"data:image/png;base64,"+a[1],Fk:"limg-"+c.key+"-"+q.f.mc},g.kk.wm(c.qd));else{if("roadlabel"===r)for(var p=1;p<a.length;p+=1){var w=a[p],A=g.a.xw(w[1],d);if(!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){var z=q.Gz(A,f),A={margin:0,z:m,zIndex:9E3,za:z,name:w[0],Dj:!0,Sa:A,Da:[],aa:[],visible:!0,zk:!0};A.id="roadlabel_"+ g.a.xb(A);A.Wq=15>w[2]%90||75<w[2]%90?90*Math.floor((w[2]+15)/90):w[2];z=w[3];0<=w[8]&&(A.mH={name:w[6],M9:w[7],dir:w[8]});var G=z[2],H=z[3],n=-Math.floor(H/2);if(w[4]){A.yv=!0;var I=w[5].split(":"),P=I[1],P=parseInt(P)-1,I=g.r.vc+"://vdata.amap.com/style_icon/icon-normal-"+(k||l?"big":"small")+".png";A.Da.push(I);var I=Math.floor(P/10),L=P%10,O=0,K=0,D=0;l?(O=48,D=K=40):k?(O=K=40,D=36):(O=K=24,D=20);var Q=O*Math.max(G+2,D)/D,I=[-Q/2,-O/2,Q,O,K*L,K*I,K,K];A.re=7;A.aa.push(I)}A.Da.push(c.qd.Fk);A.re= 11;A.aa.push([-Math.floor(G/2),n,G,H,z[0],z[1],z[2],z[3]]);c.ga||(c.ga=[]);c.ga.push(A)}}else if("poilabel"===r){for(var M=[],p=1;p<a.length;p+=1)if(w=a[p],A=g.a.xw(w[1],d),!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){z=q.Gz(A,f);A={id:w[4],margin:n,zIndex:9001,za:z,name:w[0].replace("^",""),nk:!0,Sa:A,Da:[],aa:[],visible:!0,zk:!0};A.id||(A.id="poilabel_"+g.a.xb(A));P=0;A.Cd=w[8];w[6]&&(I=w[6].split(":"),P=I[1],H=Math.floor((parseInt(I[0].split("_")[1])-28)/2));if(P&&w[3]){I=g.r.vc+"://vdata.amap.com/style_icon/icon-"+ (1===H?"biz-":"normal-")+(k||l?"big":"small")+".png";A.Da.push(I);P=parseInt(P)-1;I=Math.floor(P/10);L=P%10;l?(O=48,K=40,D=28):k?(O=K=40,D=28):(O=K=24,D=20);Q=O;if(151===P||152===P||153===P)D-=4,G=w[7][0][2],Q=O*Math.max(G+2,D)/D;I=[-Q/2,-O/2,Q,O,K*L,K*I,K,K];A.aa.push(I)}if(w[2]&&w[7])for(G=w[2],I=0;I<w[2].length;I+=1)A.Da.push(c.qd.Fk),z=w[7][I],l&&!e&&(G[I][0]=Math.round(G[I][0]*v),G[I][1]=Math.round(G[I][1]*v),G[I][2]=Math.round(G[I][2]*v),G[I][3]=Math.round(G[I][3]*v)),L=G[I][0],O=G[I][1]-(l? 4:2),K=z[3],D=z[2],L<-D&&P&&w[3]&&(L=-D+A.aa[0][0]),L-=2,A.re=K-4,4===m&&"\\u5317\\u4eac"===A.name&&(O=l?-50:-26),A.aa.push([L,O,D,z[3],z[0],z[1],z[2],z[3]]);A.Fs=w[5];A.Fs&&M.push(A.Fs);A.Ws=w[4];A.Ki=w[9];A.y6=w[10];A.ig=P;A.ov=H;c.ga||(c.ga=[]);c.ga.push(A)}c.oe||(c.oe={},c.oe.vf=M,g.Oj&&g.Oj.q("vecTileParsed.buildings",{rp:c}))}r===s[s.length-1]&&(c.status="loaded",h=c,c.La=c.Ba=!0)}}else q.FU(b,c,u,g.a.bind(q.oT,q))}}var h=null,k=g.l.ba,l=this.f.ja,m=a[0].split("-");1===m.length&&(m=a[0].split("_")); c=parseInt(m[1]);var n=parseInt(m[2]),p=parseInt(m[0]),q=this,r=m[3],s=this.f.ga,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.sk.Uy),v=this.f.ja?this.f.Ta:1,w=Math.pow(2,p);10>p&&(c<=m&&f(c+w,n,p),c>=w-m&&f(c-w,n,p));f(c,n,p);return h}};g.M.canvas.sM=g.M.canvas.Sj.extend({ka:[g.tM]});g.M.canvas.Sj.Gb({iU:function(a){this.Tx++;var b=this.$m,c=this.Vk;this.Ty={};var d=this.f.ja?this.f.Ta:1;this.nh=d;var e;0!==a.P.rotation?(e=2*Math.floor(a.P.Ha.Bc.x)*d,d*=2*Math.floor(a.P.Ha.Bc.y)):(e=a.size.width*d,d*=a.size.height);g.g.Am(b,e,d,!0);g.l.qna&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.hk=0;this.labels&&this.IT(this.labels);this.labels&&this.Fwa(this.labels,c,g.Pj.Nqa(this.e.B),this.gd,e,d);this.a6=[];this.labels&&(this.labels.op=this.zoom,this.labels.np= this.lb,this.labels.Rq=this.rotation,this.labels.OK=this.f.ja,this.labels.size=a.size);a.nb&&(this.nb=a.nb);this.nb&&(this.nb.op=this.zoom,this.nb.np=this.lb,this.nb.Rq=this.rotation,this.nb.size=a.size);this.q("afterLabelRender")},Ewa:function(a,b,c){var d=void 0===b.zk?!0:b.zk,e=1,f=void 0===b.visible?!0:b.visible,h=null,k=this.e.J.Pf;if(b.ec&&k){var l=k=h="";b.rc&&b.rc.length&&this.MQ&&(l=b.rc[0],h=l[3],k=l[4],l=b.Dj?"":l[7]);if(h=this.J.My&&this.J.My(h,k,l,b.ec,b.Su))f=h[4],d=h[3],e=h[5]}if(f){if(this.Vk.globalAlpha!== c||e)this.Vk.globalAlpha=c||e;f=0;for(k=b.Da.length;f<k;f+=1)(d||"CANVAS"===b.Da[f].tagName)&&this.$oa(a,b.Da[f],b.aa[f],b.Wq,c||e);this.Vk.globalAlpha!==c&&(this.Vk.globalAlpha=c);b.rc&&this.MQ&&(b.sj?this.bpa(a,b,h):b.rc.length&&this.MQ(a,b,h))}},$oa:function(a,b,c,d){var e=this.Vk;b=this.No(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length? b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},No:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.kk.O3(a))&&a.loaded)return a},oJ:function(a,b){var c=a[0];b&&(c>g.a.Fa/2?c-=g.a.Fa:c<-g.a.Fa/2&&(c+=g.a.Fa));return this.Ku(c,a[1])},Ku:function(a,b){var c=this.f.ja?this.f.Ta:1,d=this.T,e=0,f=0,e=(a-this.ee[0])/d,f=(b-this.ee[1])/d;return[Math.round(e*c),Math.round(f*c)]},c4:function(a,b){var c=a[0];b&&(c> g.a.Fa/2?c-=g.a.Fa:c<g.a.Fa/2&&(c+=g.a.Fa));return[c/this.T,a[1]/this.T]},Wsa:function(a,b){var c=a.za;return c[0]>b.Vd.x||c[1]>b.Vd.y||c[0]<b.kc.x||c[1]<b.kc.y?!1:!0},nEa:function(a){var b=this.a6;if(this.a6.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.nk&&this.Wsa(e,a.P.Ha)&&(this.d6.push(e),e.zoom=b.zoom,e.QEa=new Date)}},tq:function(a,b){var c=this.c4(a.za,a.reverse);if(a.nk)return this.k5(c,a,b);if(a.Dj){var d=!1,e=a.za;if(a.sj){var f=Math.pow(2,20-this.zoom),h=20*f, c=[],k=[],l=[],m=!0;for(g.hw.font=a.dr+"px "+a.font;m;){for(var n=[],p=[],q=!0,r=0;r<a.name.length;r+=1){var s=g.hw.measureText(a.name[r]).width/this.nh*f,u=g.gi.JP(e,s/2+h),h=h+s;if(!u){m=q=!1;break}if(s=this.rS(this.c4(u),5,b))p.push(s),n.push(u);else{q=!1;break}}h+=256*f;q&&(k.push.apply(k,n),c.push.apply(c,p))}if(k.length){d=!0;for(r=0;r<k.length;r+=1)f=k[r][2],f=(new g.H(e[f+1][0]-e[f][0],e[f+1][1]-e[f][1])).direction(),l.push(360-f);a.QS=k;a.bta=l}return d?c:!1}return a.im?this.k5(c,a,b):this.zoom< a.z?!1:!0}},IT:function(a){function b(b){a.opacity[b]<1-e?(a.opacity[b]+=e,d.xe=1,d.hk=1):a.opacity[b]=1}function c(b){a.opacity[b]>e?(a.opacity[b]-=e,d.xe=1,d.hk=1):a.opacity[b]=0}var d=this,e=0.34;if(!a.pF||"stable"==this.Lf&&"stable"!=this.NS){for(var f=0,h=a.length;f<h;f+=1){var k=a[f],e=k.im||g.l.ba?1:0.34,l=k.id;if(k.Aj){var m=this.tq(k);m?(this.pp(m),k.Yg=!0,b(l)):(k.Yg=!1,c(l))}else l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.hk=this.xe=1):delete a.opacity[l])}a.pF=!0}else if("zoomIn"== this.Lf){f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.im||g.l.ba?1:0.34,l=k.id,k.Aj?k.Yg&&(m=this.tq(k,!0),this.pp(m),b(l)):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.hk=this.xe=1):delete a.opacity[l]);f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.im||g.l.ba?1:0.34,l=k.id,k.Aj&&!k.Yg&&((m=this.tq(k))?(this.pp(m),k.Yg=!0,b(l)):(k.Yg=!1,c(l)))}else if("zoomOut"==this.Lf||a.zoom>this.zoom)for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.im||g.l.ba?1:0.34,l=k.id,k.Aj?k.Yg?(m=this.tq(k))?(this.pp(m),k.Yg=!0,b(l)): (k.Yg=!1,c(l)):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.hk=this.xe=1):delete a.opacity[l]);else for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.im||g.l.ba?1:0.34,l=k.id,k.Aj?k.Yg?b(l):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.hk=this.xe=1):delete a.opacity[l]);return!1},Fwa:function(a,b,c,d,e,f){d=!1;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Dj||k.Dp&&c&&0<=c.indexOf(k.Dp))){var l=this.oJ(k.za,k.reverse);-256> l[0]||l[0]>e+256||-256>l[1]||l[1]>f+256||a.opacity[k.id]&&this.Ewa(l,k,a.opacity[k.id])}}},zJ:function(a){if(a.nb&&a.nb.length)if(this.nb&&this.nb.length){if(this.nb!==a.nb||this.nb.op!==this.zoom||this.nb.np!==this.lb||this.nb.Rq!==this.rotation||!this.nb.size.gb(a.size))return!0}else return!0;else if(this.nb&&this.nb.length)return!0},iQ:function(a){this.uh&&this.uh.OK!==this.f.ja&&this.f.set("reload");return this.hk||this.zJ(a)||this.labels&&(this.e.lR||this.labels!==this.uh||!this.uh||this.uh.op!== this.zoom||this.uh.np!==this.lb||a.Hi||this.uh.Rq!==this.rotation||this.uh.OK!==this.f.ja||!this.uh.size.gb(a.size))?!0:!1},k5:function(a,b,c){var d,e=b.aa.length,f=[];if(b.Ki>this.zoom)d=!0;else for(var h=0;h<e;h+=1){var k=b.aa[h];if(!k[8]){var l=k[2],m=k[3],n=k[0],k=k[1];this.f.ja&&(l/=2,m/=2,n/=2,k/=2);var p=b.margin,n=n-p,k=k-p,l=l+2*p,m=m+2*p,n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Bs),m=Math.ceil((k+m)/this.Bs),n=Math.floor(n/this.Bs),k=Math.floor(k/this.Bs);(m=c?[n,l,k,m]:this.l5(n,k,l,m))? f.push(m):d=!0}}return d?!1:f},rS:function(a,b,c){var d=a[0]-b/2;a=a[1]-b/2;var e=Math.ceil((d+b)/this.Bs);b=Math.ceil((a+b)/this.Bs);d=Math.floor(d/this.Bs);a=Math.floor(a/this.Bs);return c?[d,e,a,b]:this.l5(d,a,e,b)},pp:function(a){for(var b=0;b<a.length;b+=1)for(var c=a[b][0],d=a[b][2],e=a[b][3],f=0,h=a[b][1]-c;f<=h;f+=1)for(var k=0,l=e-d;k<=l;k+=1)this.Ty[c+f]||(this.Ty[c+f]={}),this.Ty[c+f][d+k]=1},l5:function(a,b,c,d){for(var e=0,f=c-a;e<=f;e+=1)if(this.Ty[a+e])for(var h=0,k=d-b;h<=k;h+=1){if(1=== this.Ty[a+e][b+h])return!1}else this.Ty[a+e]={};return[a,c,b,d]}});g.M.canvas.Sj.waa=g.da.extend({A:function(a){this.M=a},Yka:function(a){this.Eq=a;return this.jP([0,0,0])?!0:this.Eq=!1},GZ:function(){return this.M.fe?!1:!0},Vfa:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.Yfa.apply(this,b);case "label":return this.Zfa.apply(this,b);default:console.error("Unknown type",a)}}},PY:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},tla:function(a){return 0>a?0:255< a?255:Math.round(a)},r1:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.tla(a[b+c]);return a},iP:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},Oka:function(a){return[255-a[0],255-a[1],255-a[2]]},jP:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.Eq){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},$fa:function(a,b){var c=20,d=10;switch(b.Ro){case "active":c+=20,d+=20}return this.iP(this.jP(a,c),d)},lZ:function(a,b){var c=-110;switch(b.Ro){case "active":c+=30}return this.iP(this.jP(this.Oka(a),c),50)},Xfa:function(a){return this.iP(a,20)},kZ:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.r1(c,d)},gfa:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.HN(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Vza:0<e? d/e:0,Nna:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},HN:function(a,b,c){return b*c+a},zH:function(a,b,c,d,e,f,h){var k=this.HN(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.B6||h.H9&&!h.H9.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},Oja:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},Mx:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},ila:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.Oja(f, c[c.length-1])<=b&&c.push(f)}return this.Mx(c[c.length-1],a[a.length-1])?c:null},sCa:function(){},hda:function(a,b,c,d){d=g.extend({B6:0.2,w6:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.zH(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.zH(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.zH(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.zH(a,f,e,b, c,m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.Mx(l[l.length-1],k[0])&&this.Mx(k[k.length-1],m[0])&&this.Mx(m[m.length-1],h[0])&&this.Mx(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.ila(b[e],d.w6),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},Kea:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},aZ:function(a,b){this.i1||(this.i1=document.createElement("canvas"));var c=this.i1;c.width=a;c.height=b;return c},pfa:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},rY:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},yX:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.rY(e))):a[this.pfa(e)].apply(a,this.rY(e))}},Sea:function(a){a=this.lZ([255,255,255],{Ro:a.Ro});this.r1(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},Wfa:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=g.extend({Ro:"hover",Qr:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.aZ(2*e+10,f),k=h.getContext("2d"), l=this.Kea(b),m=c.padding;g.l.Kc&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.yX(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.Qr&&10<b.length;var u=c.strokeStyle||this.Sea(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.Kc?2:1.2;k.stroke();k.restore();return{Ba:h,ri:[0,0,e,f],zd:a?function(a,c){this.kla(a,c,b,u)}:null}},kla:function(a,b,c,d){this.lda();var e=this.M.Tx;this.oX(a,c,{duration:200,CT:0,startTime:Date.now(),qxa:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.Kc?2:1;a.translate(b[0],b[1])},Wza:function(){return this.M.Tx!==e}})},lda:function(){this.GM&&g.a.ui(this.GM)},oX:function(a,b,c,d){this.GZ()?this.GM= g.a.Yc(function(){this.GM=null;if(c.Wza.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.CT<f){var h=1===e?b:b.slice(c.CT,f+1);h.length&&(a.save(),c.qxa.call(this,a,e),this.yX(a,h),a.stroke(),a.restore());c.CT=f}1>e?this.oX(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},xda:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n= 4*this.HN(c,m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},Sga:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},tga:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.Sga(a,b,d*f);e.length&&this.Mx(h,e[e.length-1])||e.push(h)}return e},uga:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.tga(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},tfa:function(a, b,c,d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.uga(a,5);return a},Yfa:function(a,b,c,d,e,f){b=a.ri;var h=c?c.uS:this.PY(d,e,b);if(h){var k=c?c.Y4:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.xda(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.M.e)&&c.B?c.B.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.gfa(l);a=!a.Gsa&&0.46<=l.Vza;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.lZ:this.Xfa,u=0,v=d.length;u<v;u+=4)this.kZ(d,u,e,u,s,{Ro:f});if(m&&(e=a&&!g.l.Kc?this.hda(d,b,q,{H9:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,B6:0.2,w6:4}):null,e||(e=l.Nna,e=this.tfa(e[0],e[1],e[2],e[3],0.2)),e)){var w=this.Wfa(r,e,{Ro:f,fillStyle:"active"!==f?null:"#ddd",iK:h,Qr:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{iK:h, Lz:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(w.Ba,w.ri[0],w.ri[1],w.ri[2],w.ri[3],b[0],b[1],b[2],b[3]);w.zd&&(w.zd.call(this,a,b),w.zd=null)}}}return{iK:h,Lz:function(a,b){if(m){var c=this.aZ(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},Zfa:function(a,b,c,d,e,f){a=a.ri;if(c=c?c.uS:this.PY(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.kZ(d,a,e,a,this.$fa,{Ro:f});return{iK:c,Lz:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},cZ:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.AZ){if((b=this.M.No(b))&&b.loaded)return c=[4,4],g.l.Kc&&(c[0]*=2,c[1]*=2),{type:"icon",Gsa:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,ri:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",ri:[f,a,d,e]}}}); g.M.canvas.Sj.Gb({NY:function(){this.PN||(this.PN=new g.M.canvas.Sj.waa(this));return!1===this.PN.Yka(this.Eq)?null:this.PN},Vt:function(a,b){var c=this.NY();if(c&&c.GZ()&&a&&a.Da&&a.aa&&0===this.rotation){var d=this.Tx,e=this.oJ(a.za),f=[],h;a.Gr||(a.Gr=[]);var k=a.Gr;for(h=a.aa.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].Y4===b)continue}var l=c.cZ(e,a.Da[h],a.aa[h]);if(l){var m=c.Vfa(l,a,k[h],this.$m,this.Vk,b);m&&(k[h]={Y4:b,rev:d,uS:m.iK},f.push({Lz:m.Lz,ri:l.ri,mE:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.mE-b.mE});h=0;for(d=f.length;h<d;h++)f[h].Lz.call(c,this.Vk,f[h].ri),f[h].Lz=null}},WA:function(a){a.Gr&&(a.Gr.length=0,a.Gr=null)},BH:function(){var a=this.Vk;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},GH:function(a){if(a&&a.Da&&a.aa&&a.Gr){var b=this.Vk,c=this.NY();if(c){for(var d=this.Tx,e=this.oJ(a.za),f=a.Gr,h=0,k=a.aa.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.cZ(e,a.Da[h],a.aa[h]);m&&m.ri&&b.putImageData(l.uS,m.ri[0], m.ri[1])}}a.Gr=null;this.Tx++}}}});g.Nw={h:function(a,b,c,d,e){if(this.ue(a,b,c||this))return this;var f=this.of=this.of||{};f[a]=f[a]||[];e?f[a].unshift({wb:b,cf:c||this,Fj:d}):f[a].push({wb:b,cf:c||this,Fj:d});"complete"===a&&this.La&&this.q(a);return this},ue:function(a,b,c){var d=this.of;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].wb===b&&d[a][e].cf===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},G:function(a,b,c){if(!this.ue(a))return this;var d=this.of;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].wb!==b&&"mv"!==b||c&&d[a][e].cf!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},gK:function(a,b){if(!this.ue(a))return this;var c=this.of;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].cf===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},q:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.ue(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.of[a]),f=0;f<e.length;f+=1)e[f].wb&&(e[f].wb.call(e[f].cf||this,d),e[f]&&e[f].Fj&&this.of[a]&&this.of[a].splice(f,1));return this},wi:function(a){a?this.of&&this.of[a]&&(this.of[a]=null):this.of=null;return this}};(function(){if(!g.Nk){g.Nk=g.ML();var a=g.a.oD({Gz:"posToCoord",bB:"_decodeBoundsList"});g.Nk.yf(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.tM.Gz.toString()+",\\n      "+a._decodeBoundsList+": "+g.Yw.bB.toString()+"\\n  }"));g.Nk.yf(null,function(){return{xb:function(){var a=0;return function(c){c._amap_label_id_||(a+=1,c._amap_label_id_=a);return c._amap_label_id_}}(),Us:function(a,c){a.Eh.Ve||(a.Eh.Ve=this.Ve);a.Uo?this.Eua.call(this,a,c):this.Fua.call(this,a,c)},Fua:function(a, c){for(var d=a.dF,e=a.ll,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.BS&&(l=JSON.parse(l)),l["x-vd-v"]?(this.df=a.Eh.df=l["x-vd-v"],this.mf=a.Eh.mf=[l.tv||"",l.vdv].join("-"),this.Qh=a.Eh.Qh=l.tv):this.Dua(this.extend({},a,{PC:l,Pc:f})))}f.length?this.parseLabel(this.extend({},a.Eh,{Pc:f}),function(d,f){var h=f.data,k=f.Sra;c(d,{mc:a.mc,Hb:a.Hb.filter(function(a){return"loaded"===a.status}),data:h,Sra:k,ll:e,Vg:{df:a.Eh.df,mf:a.Eh.mf,Qh:a.Eh.Qh,Md:a.Md}},{Iq:!e,hl:e})}):c(null,{mc:a.mc,data:null, ll:e},{Iq:!e,hl:e})},Dua:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key===n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=f[1],a.qd=b,"string"===typeof b.b&&(b.b=u.bB(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Fk:"limg-"+a.key+"-"+e});else{b={Lg:a.ta,Qi:n,Oa:f,Ed:v,FD:"building"===v,Ei:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.qd=a.qd;v===l[l.length- 1]&&(a.status="loaded");k.push(b)}}var d=a.Hb,e=a.OS,f=a.PC,h=a.Md,k=a.Pc,l=a.ga,m=a.Sf,n=a.ZR,p=a.ze,q=f[0].split("-");a=parseInt(q[1]);var r=parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},Eua:function(a,c){for(var d=a.dF,e=a.ll,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.BS&&(l=JSON.parse(l)),l["x-vd-v"]?(this.df=a.Eh.df=l["x-vd-v"],this.mf=a.Eh.mf=[l.tv||"",l.vdv].join("-"),this.Qh=a.Eh.Qh=l.tv):this.Cua(this.extend({},a,{PC:l, Pc:f,df:this.df||"v4"})))}d=a.Hb.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.Hb.length-1;0<=f;f--)"loaded"===a.Hb[f].status&&a.Hb.splice(f,1);c(null,{mc:a.mc,oDa:[],Hb:d,ll:e,Vg:{df:a.Eh.df,mf:a.Eh.mf,Qh:a.Eh.Qh,Md:a.Md}},{Iq:!e,hl:e})},Cua:function(a){function c(a,b,c,f){var l=[f,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.ta,a&&"loaded"!==a.status&&-1!==k.indexOf(x))if("limg"===x)p[1]&&(a.qd={url:"data:image/png;base64,"+p[1],Fk:"limg-"+a.key+"-"+ n});else{if("roadlabel"===x)for(c=1;c<p.length;c+=1){var m=p[c],v=d.xw(m[1],q);if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){var u=t.Gz(v,b),v={margin:0,z:f,zIndex:9E3,za:u,name:m[0],Dj:!0,Sa:v,Da:[],aa:[],visible:!0,zk:!0};v.id="roadlabel_"+d.xb(v);v.Wq=15>m[2]%90||75<m[2]%90?90*Math.floor((m[2]+15)/90):m[2];u=m[3];0<=m[8]&&(v.mH={name:m[6],M9:m[7],dir:m[8]});var w=u[2],L=u[3],O=-Math.floor(L/2);if(m[4]){v.yv=!0;var K=m[5].split(":"),D=K[1],D=parseInt(D)-1,K=r.vc+"://vdata.amap.com/style_icon/icon-normal-"+ (s||h?"big":"small")+".png";v.Da.push(K);var K=Math.floor(D/10),Q=D%10,M=0,J=0,N=0;h?(M=48,N=J=40):s?(M=J=40,N=36):(M=J=24,N=20);var V=M*Math.max(w+2,N)/N,K=[-V/2,-M/2,V,M,J*Q,J*K,J,J];v.re=7;v.aa.push(K)}v.Da.push(a.qd.Fk);v.re=11;v.aa.push([-Math.floor(w/2),O,w,L,u[0],u[1],u[2],u[3]]);a.ga||(a.ga=[]);a.ga.push(v)}}else if("poilabel"===x){O=[];for(c=1;c<p.length;c+=1)if(m=p[c],v=d.xw(m[1],q),!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){u=t.Gz(v,b);v={id:m[4],margin:e,zIndex:9001,za:u,name:m[0].replace("^", ""),nk:!0,Sa:v,Da:[],aa:[],visible:!0,zk:!0};v.id||(v.id="poilabel_"+d.xb(v));D=0;v.Cd=m[8];m[6]&&(K=m[6].split(":"),D=K[1],L=Math.floor((parseInt(K[0].split("_")[1])-28)/2));if(D&&m[3]){K=r.vc+"://vdata.amap.com/style_icon/icon-"+(1===L?"biz-":"normal-")+(s||h?"big":"small")+".png";v.Da.push(K);D=parseInt(D)-1;K=Math.floor(D/10);Q=D%10;N=J=M=0;h?(M=48,J=40,N=28):s?(M=J=40,N=28):(M=J=24,N=20);V=M;if(151===D||152===D||153===D)N-=4,w=m[7][0][2],V=M*Math.max(w+2,N)/N;K=[-V/2,-M/2,V,M,J*Q,J*K,J,J];2<= D&&5>=D&&(K[8]=!0);v.aa.push(K)}if(m[2]&&m[7])for(w=m[2],K=0;K<m[2].length;K+=1)v.Da.push(a.qd.Fk),u=m[7][K],h&&(w[K][0]=Math.round(w[K][0]*y),w[K][1]=Math.round(w[K][1]*y),w[K][2]=Math.round(w[K][2]*y),w[K][3]=Math.round(w[K][3]*y)),Q=w[K][0],M=w[K][1]-(h?4:2),J=u[3],N=u[2],Q<-N&&D&&m[3]&&(Q=-N+v.aa[0][0]),Q-=2,v.re=J-4,4===f&&"\\u5317\\u4eac"===v.name&&(M=h?-50:-26),v.aa.push([Q,M,N,u[3],u[0],u[1],u[2],u[3]]);v.Fs=m[5];v.Fs&&O.push(v.Fs);v.Ws=m[4];v.Ki=m[9];v.y6=m[10];v.ig=D;v.ov=L;a.ga||(a.ga=[]); a.ga.push(v)}a.oe||(a.oe={},a.oe.vf=O)}x===k[k.length-1]&&(a.status="loaded",a.La=a.Ba=!0)}}var d=this,e="3D"==a.Kf?0:-3,f=a.Hb,h=a.Kc,k=a.ga,l=a.ZR,m=a.Ta,n=a.OS,p=a.PC,q=a.df,r=this.r,s=this.l.ba,u=p[0].split("-");1===u.length&&(u=p[0].split("_"));a=parseInt(u[1]);var v=parseInt(u[2]),w=parseInt(u[0]),t=this,x=u[3],y=h?m:1,m=Math.pow(2,w);10>w&&(a<=l&&c(f,a+m,v,w),a>=m-l&&c(f,a-m,v,w));c(f,a,v,w)}}},function(a){a||(g.Nk.cta=!0)})}})();(function(){if(!g.Fc){g.Fc=g.ML();var a=g.a.oD({h:"on",ue:"hasEvents",G:"off",gK:"offByContext",q:"emit",wi:"clearEvents"});g.Fc.yf(null,function(){return{isa:function(){var a=this;this.Zr=[];this.$r={};if("undefined"!==typeof worker)for(var c=0;10>c;c++){var d=new Worker(this.nna);d.status={index:c,f5:!0,EK:!1,jL:0};d.addEventListener("message",function(c){var d=c.data;c=c.target;d.ping&&200===d.status?(c.status.EK=!0,a.Zr.filter(function(a){return a.status.EK}).length===a.Zr.length&&(a.Zr.EK=!0)): d.result&&a.Xva(c,d)});this.Zr.push(d);d.postMessage({cmd:"ping",ts:(new Date).getTime()})}},Xva:function(a,c){var d=c.parentTaskId,e=c.taskId,f=this.$r[d],h=!1;f[e].data=c;f[e].index=a.status.index;for(var k=0,l=f.length;k<l;k++){var m=f[k];if(m&&m.Nc)if(m.data){var n=m.data;m.Nc(n.err,n.result,m.IL);m.IL.hl&&(h=!0);m.data=null;m.Vu=!0;m.Nc=null;m.IL=null;f[k]=null}else if(!m.Vu)break}h&&e===f.length-1&&!f[e]&&delete this.$r[d];0===--a.status.jL&&(a.status.f5=!0)},ima:function(a,c,d){var e=a.parentTaskId; this.Zr.sort(function(a,b){return a.status.jL-b.status.jL});void 0===this.$r[e]&&(this.$r[e]=[]);this.$r[e].push({IL:c,Nc:d});c=this.Zr[0];c.status.f5=!1;c.status.jL++;a.taskId=this.$r[e].length-1;a.ts=(new Date).getTime();a.workerIndex=c.status.index;c.postMessage(a)},n6:function(a,c){var d=this;if(3<this.pu||this.disabled)return this.Ah(a,c);var e=a.Hb,f=a.Md,h=a.Ke,k=a.hr,l=a.vsa,m=a.ga;if(h&&this.bC())this.Ml(e,c);else if(!this.X4(a,function(a,b){var c=a.Hb,d=a.hr;b.reverse().forEach(function(a){a= c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(),this.za.length+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.Pp[n]={Hb:e,Md:f,w:a,Nc:c,Ke:h};h||(this.Wk[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.GJ()||setTimeout(function(){d.GJ()||(d.pu?d.pu++:d.pu=1,d.npa(p)&&(delete d.Pp[n],delete d.Wk[n],d.Ah(a,c)))},300);this.h("tiles",this.bE,this);this.h("ack",this.aE,this);this.h("disable",this.ZD, this)}},$ma:function(a){this.O5()&&this.send(a)},ZD:function(){this.disabled=!0;this.close();for(var a in this.Pp)this.Pp.hasOwnProperty(a)&&this.lY(a)},lY:function(a){var c=this.Pp[a];c&&(this.Ml(c.Hb,c.Nc),delete this.Pp[a],delete this.Wk[a])},aE:function(a){var c=a.reqId,d=this.Pp[c];d&&(a.content.status?d.Nc&&(d.Nc(null,{mc:d.w.mc,Kla:!0,gFa:!0},{Iq:!1,hl:!0}),delete this.Pp[c],delete this.Wk[c]):this.lY(c))},bE:function(a){var c=this.Pp[a.reqId];if(c)if(c.Ke){a=a.content.data;for(var d=0,e=a.length;d< e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0,-1).join("/");this.Yj[h]?this.Yj[h].push(f):(this.Yj[h]=[f],this.Rt++);this.Yj[h].length===c.w.ga.length&&(this.Yj[h].SZ=!0)}}}else this.Us(this.extend({ll:!1},c.w,{dF:a.content.data,Md:a.content.opt}),c.Nc)},vva:function(a,c,d){var e=c.ll,f=c.Eh;c.Gu||(c.Gu=[]);if(a.length){for(var h=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;a||(q.Hb=c.Hb.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key, status:a.status}}),q.data=b.data,q.ll=e.hl,q.ll&&(q.Gu=c.Gu,c.Gu=null));d(a,q,e)},k=this.extend({},f),l=0,m=a.length;l<m;l++){var n=a[l];n&&c.Gu.push({Qi:n.Qi,Ed:n.Ed,Oa:JSON.stringify(n)})}var p={Iq:!e,hl:!!e},q={mc:c.mc,Du:c.Du,Gu:[],Vg:{df:f.df,Qh:f.Qh,mf:f.mf,Md:c.Md}},e=c.Sf?"parseDataToWebGL":"parseDataToVector";if(c.Sf&&this.Zr&&this.Zr.EK)for(f=0,l=Math.ceil(a.length/15);f<l;f++)m=null,m=f===l-1?p:{Iq:!0,hl:!1},k.Pc=a.slice(15*f,15*(f+1)),this.ima({cmd:e,args:[k],parentTaskId:c.mc},m,h);else k.Pc= a,k.Ve=this.Ve,this[e](k,h)}else e&&(this.$r?(a=this.$r[c.mc])&&a.length&&a[a.length-1]&&(a[a.length-1].IL={Iq:!1,hl:!0}):d(null,{mc:c.mc,Hb:[],data:null,ll:e},{Iq:!e,hl:!!e}))},Us:function(a,c){for(var d=a.dF,e=[],f=0,h=d.length;f<h;f++){var k=d[f];k&&(a.BS&&(k=JSON.parse(k)),k["x-vd-v"]?(this.df=a.Eh.df=k["x-vd-v"],this.Qh=a.Eh.Qh=k.tv,this.mf=a.mf=[k.tv||"",k.vdv].join("-"),k.bgc&&(k="#"+k.bgc.substring(2),a.Du!==k&&(a.Du=k))):this.$D(this.extend({},a,{PC:k,Pc:e})))}this.vva(e,a,c)},DGa:function(a){for(var c= 0,d=a.length;c<d;c++){var e=a[c];e.Qp&&(self.yu(e.Qp),delete e.Qp)}}}});g.Fc.yf(null,new Function("\\n    return {\\n      "+a.on+": "+g.Nw.h.toString()+",\\n      "+a.hasEvents+": "+g.Nw.ue.toString()+",\\n      "+a.off+": "+g.Nw.G.toString()+",\\n      "+a.offByContext+": "+g.Nw.gK.toString()+",\\n      "+a.emit+": "+g.Nw.q.toString()+",\\n      "+a.clearEvents+": "+g.Nw.wi.toString()+"\\n    }\\n  "));g.EW?g.Fc.yf(null,g.EW,function(a){a||(g.Fc.p5=!0)}):g.Fc.p5=!0}})(); ');_jsload_('overlay', 'g.Aa.Ec=g.Aa.Qe.extend({A:function(a,b){var c=a.length;this.Vf=Array(c);for(var d,e,f=0;f<c;f+=1)if(d=a[f],e=new g.Aa.XL(d),this.Vf[f]=e,!b)if(0===f){if(0===d.length)break;e.vq(d)||d.reverse()}else 0!==d.length&&e.vq(d)&&d.reverse()},Kd:function(){if(0===this.Vf.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.Bg){for(var a=this.Vf[0].Kd(),b=1;b<this.Vf.length;b+=1){var c=this.Vf[b].Kd();g.I.K2(a,c)||g.I.extend(a,c)}this.Bg=a}return this.Bg},z4:function(){return this.Vf},AEa:function(){for(var a= 0;a<this.Vf.length;a+=1);},Bi:function(){return g.Aa.Re.FF},Sd:function(a){for(var b=this.Vf,c,d=0,e=b.length;d<e&&(c=b[d].Sd(a),0<d&&(c=!c),c);d+=1);return c},Wna:function(a){for(var b=this.Vf,c,d=[],e=0,f=b.length;e<f;e+=1)(c=g.wd.vq(b[e].za))?d.length&&d[d.length-1].push(e):d.push([e]);e=0;for(f=d.length;e<f;e+=1){c=!1;for(var h=0,k=d[e].length;h<k&&(c=g.Aa.XL.prototype.Sd.call(b[d[e][h]],a),0<h&&(c=!c),c);h+=1);if(c)return!0}}});g.Aa.xp=g.Aa.Qe.extend({A:function(a){var b=a.length;this.he=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.Ec(a[c]);this.he[c]=d}},Kd:function(){if(!this.Bg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.he,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].Kd());this.Bg=a}return this.Bg},uR:function(){return this.za},Bi:function(){return g.Aa.Re.BF},S3:function(){return this.he},Sd:function(a){for(var b=!1,c=0,d=this.he.length;c<d;c+=1)if(this.he[c].Sd(a)){b=!0;break}return b}});g.Aa.rr=g.Aa.Qe.extend({A:function(a){this.za=a},Kd:function(){if(!this.Bg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.za.length;b<c;b+=1)g.I.LI(a,this.za[b]);this.Bg=a}return this.Bg},uR:function(){return this.za},Bi:function(){return g.Aa.Re.TL},tqa:function(){return this.za.length},By:function(a){return g.wd.ms(a,this.za)}});g.Aa.XL=g.Aa.rr.extend({Bi:function(){return g.Aa.Re.mW},vq:g.wd.vq,Sd:function(a){return g.wd.Sd(a,this.za)}});g.Aa.Tw=g.Aa.Qe.extend({A:function(a){var b=a.length;this.za=a;this.he=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.rr(a[c]);this.he[c]=d}},S3:function(){return this.he},Kd:function(){if(!this.Bg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.he,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].Kd());this.Bg=a}return this.Bg},uR:function(){return this.za},Bi:function(){return g.Aa.Re.cM},tqa:function(){return this.za.length},By:function(a){for(var b=Infinity,c=0,d=this.he.length;c<d;c+=1)b=Math.min(b, this.he[c].By(a));return b}});g.C.Zb=g.C.Hh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.VH=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.Fu();this.X("display",b);b.h("zoomend",this.qo,this)},Zp:function(){if("3D"==this.map.B.view.type){var a=this.L;a&&(a.fc().Wj=!0)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},$o:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Nd(b),e=[],f,h,b=0;for(f= c.length;b<f;b+=1)h=this.map.Ab(c[b]).add(d),e.push(this.map.Od(h));0<e.length&&this.set("path",e);if(this.ju&&0<this.ju.length)for(b=0,c=this.ju.length;b<c;b+=1)this.ju[b].$o(a)},sz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.VH.q("change",{type:"change",target:this.VH})},mB:function(a){this.get("options");return this.wga()?this.cfa(a):this.DN(a)},wga:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, cfa:function(a){if(!a||!a.length)return[];var b,c=[],d,e,f=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);f.push(this.EN(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.EN(a[d]),b=Math.round(Math.abs(h[0]-f[f.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].R-a[d].R))),"3D"==this.map.B.view.type&&(b=Math.round(b/1.2)),b=g.U.Jqa(a[d-1],a[d],b),c.push.apply(c,b),f.push.apply(f,this.DN(b)),c.push(a[d]),f.push(h);return f},rD:function(a, b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},eI:function(a,b,c){var d=g.l.Gn?1:0,e=[],f=[],h,k,l,m,n,p,q;m=a.fc();m instanceof g.Aa.rr?q=[m]:m instanceof g.Aa.Tw&&(q=m.he);var r="",s=a.Ma.rotation;a=this.map.get("size");m=Math.PI*s/180;var u=(Math.abs(a.width*Math.cos(m))+Math.abs(a.height*Math.sin(m)))/2,v=(Math.abs(a.width*Math.sin(m))+Math.abs(a.height*Math.cos(m)))/2;a=[];h=0;for(k=q.length;h<k;h+=1)if(l=q[h].za,l.length){var w=0;n=0;for(p=l.length;n<p;n+=1)if(m=l[n],e=this.lg(m),e[0]= g.a.vb(e[0]+u,d),e[1]=g.a.vb(e[1]+v,d),0===n)f[0]=e[0],f[1]=e[1],r+=" M"+e[0]+" "+e[1];else if(e[0]!==f[0]||e[1]!==f[1]){if(b){var t=Math.sqrt(Math.pow(e[0]-f[0],2)+Math.pow(e[1]-f[1],2));if(40<t+w){var s=f,x=e;x[0]===s[0]?s=x[1]>s[1]?Math.PI:0:x[1]===s[1]?s=x[0]>s[0]?Math.PI/2:-Math.PI/2:(m=x[0]-s[0],x=x[1]-s[1],s=Math.atan(m/x),0<m&&0<x?s=Math.PI-s:0>m&&0>x?s=-s:0<m&&0>x?s=-s:0>m&&0<x&&(s=Math.PI-s));for(m=40-w;m<t;)x=this.rD(f,e,m/t),a.push(x[0],x[1],s),m+=40;w=(t-(40-w))%40}else w+=t}r+=" L"+ e[0]+" "+e[1];f[0]=e[0];f[1]=e[1]}}b=[r];if(a.length){f="";c/=2;m=3*Math.PI/4;for(q=0;q<a.length;q+=3)r=a[q],u=a[q+1],k=a[q+2]+m,h=a[q+2]-m,e=r+Math.sin(k)*c,k=u-Math.cos(k)*c,l=r+Math.sin(h)*c,h=u-Math.cos(h)*c,f+=" M"+g.a.vb(e,d)+" "+g.a.vb(k,d),f+=" L"+g.a.vb(r,d)+" "+g.a.vb(u,d),f+=" L"+g.a.vb(l,d)+" "+g.a.vb(h,d);b.push(f)}return b},Fu:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.di({yN:this.Kb.OG,name:"polyline-"+g.a.xb(this),zIndex:this.get("options").zIndex|| 1,map:a,W:new g.Aa.rr(this.mB(b)),style:this.get("options")});b.wo=this;b.fc().Wj=!0;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.bf("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){var a=this.L,b=this.get("path");a&&(this.Zp(),this.set("coords",this.mB(b)),a.qe=!0,"c"!==this.map.get("overlayRender")&&a.Ma?(b=this.Kb.get("showDir")&&g.l.HL,b=this.eI(a,b,this.Kb.get("strokeWeight")),0===b[0].length&&a.Ma?(g.g.remove(a.Ma.Rh), g.g.remove(a.Ma.Rc),g.g.remove(a.Ma.dir),a.Ma=null):g.l.Gn?(a.Ma.Rh.setAttribute("d",b[0]),a.Ma.Rc&&a.Ma.Rc.setAttribute("d",b[0]),a.Ma.dir&&b[1]&&a.Ma.dir.setAttribute("d",b[1])):(b=b[0]+" e",a.Ma.Rh.path=b,a.Ma.Rc&&(a.Ma.Rc.path=b))):this.set("display"))},qo:function(){},visibleChanged:function(){this.L&&(this.L.Ma?this.get("visible")?(this.L.Ma.Rh.style.display="block",this.L.Ma.Rc&&(this.L.Ma.Rc.style.display="block"),this.L.Ma.dir&&(this.L.Ma.dir.style.display="block")):(this.L.Ma.Rh.style.display= "none",this.L.Ma.Rc&&(this.L.Ma.Rc.style.display="none"),this.L.Ma.dir&&(this.L.Ma.dir.style.display="none")):this.set("display"))},optionsChanged:function(){this.Zp();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.ss(),this.L.Ma&&(g.g.remove(this.L.Ma.Rh),g.g.remove(this.L.Ma.Rc),g.g.remove(this.L.Ma.dir)));this.set("display")}});g.C.tA=g.C.Zb.extend({A:function(a,b){this.cma=a;arguments.callee.ma.apply(this,arguments);this.X("tolerance",a);b.h("zoomend",this.qo,this)},$o:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Nd(b),e=[],f,h,b=0;for(f=c.length;b<f;b+=1){h=this.map.Ab(c[b]).add(d);var k=this.map.Od(h);e.push(k);if(c[b].controlPoints){k.controlPoints=[];for(var l=c[b].controlPoints,m=0,n=l.length;m<n;m+=1)h=this.map.Ab(l[m]).add(d),k.controlPoints.push(this.map.Od(h))}}0<e.length&&this.set("path", e);if(this.ju&&0<this.ju.length)for(b=0,c=this.ju.length;b<c;b+=1)this.ju[b].$o(a)},sz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.VH.q("change",{type:"change",target:this.VH})},DN:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return g.Kw.f4(a,this.map.pj,b,this.cma.w)},toleranceChanged:function(){this.pathChanged()},qo:function(){this.pathChanged()},Tt:function(a,b){for(var c=[],d=void 0,e=void 0,f=void 0,d=0,e=a.length;d<e;d+=1){f= this.map.Ab(a[d]);f.x+=b[0];f.y+=b[1];var h=this.map.Od(f);c.push(h);if(a[d].controlPoints){h.controlPoints=[];for(var k=a[d].controlPoints,l=0,m=k.length;l<m;l+=1)f=this.map.Ab(k[l]),f.x+=b[0],f.y+=b[1],h.controlPoints.push(this.map.Od(f))}}return c}});g.C.Ec=g.C.Hh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.uC=a;this.X("options",a);this.X("path",a);this.Fu();this.X("display",b)},Zp:function(){if("3D"==this.map.B.view.type){var a=this.L;if(a)for(var a=a.fc().he,b=0;b<a.length;b+=1)a[b].Wj=!0}},deltaPosChanged:function(){this.set("display")},$o:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Nd(b);var b=[],d,e,f;c.length&&c[0]instanceof g.U&&(c=[c],e=!0);if(c.length){c[0]instanceof g.U?(c= [[c]],e=!0):c[0]instanceof Array&&c[0][0]instanceof g.U&&(f=!0,c=[c]);for(var h=0,k=c.length;h<k;h+=1){for(var l=c[h],m=[],n=0,p=l.length;n<p;n+=1){for(var q=l[n],r=[],s=0,u=q.length;s<u;s+=1)d=this.map.Ab(q[s]).add(a),r.push(this.map.Od(d));m.push(r)}b.push(m)}this.uC.q("movepoly",{uK:a});0<b.length&&(e?b=b[0][0]:f&&(b=b[0]),this.set("path",b))}},sz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.uC.q("movepoly",{uK:c});this.uC.q("change",{type:"change", target:this.uC});this.uC.q("setPath")},Tt:function(a,b){var c=this.map.B,d=[];if(g.a.isArray(a)){if(g.a.isArray(a[0]))for(c=0;c<a.length;c+=1)d[c]=this.Tt(a[c],b);else for(var e=0,f=a.length;e<f;e++){var h=c.Ab(a[e]);h.x+=b[0];h.y+=b[1];d.push(c.Od(h))}return d}},bna:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return a.length?a[0]instanceof g.U?[[a]]:a[0]instanceof Array&&a[0][0]instanceof g.U?[a]:a:a},mB:function(){for(var a=0<arguments.length&&void 0!==arguments[0]? arguments[0]:[],a=this.bna(a),b,c,d=[],e=this.map,f=0;f<a.length;f+=1){for(var h=a[f],k=[],l=0;l<h.length;l+=1){var m=h[l],n=[];b=0;for(c=m.length;b<c;b+=1){var p=e.Ab(m[b]);n.push([p.x,p.y])}k.push(n)}d.push(k)}return d},Fu:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.di({yN:this.Kb.OG,name:"polygon-"+g.a.xb(this),zIndex:this.get("options").zIndex||1,map:a,W:new g.Aa.xp(this.mB(b)),style:this.get("options")});b.wo=this;for(var c=b.fc().he,d=0;d<c.length;d+=1)c[d].Wj= !0;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.bf(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.L,b=this.get("path");a&&(this.set("coords",this.mB(b)),this.Zp(),a.qe=!0,"c"!==this.map.get("overlayRender")&&a.fa?(b=this.fI(a),0===b.length?(a.fa.parentNode.removeChild(a.fa),a.fa=null):g.l.Gn?a.fa.setAttribute("d",b.join(" ")):(b.push("e"),a.fa.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight}, visibleChanged:function(){this.L&&(this.L.fa?this.get("visible")?this.L.fa.style.display="block":this.L.fa.style.display="none":this.set("display"))},optionsChanged:function(){this.Zp();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.ss());this.set("display")},fI:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,f,h,k,l,m,n=a.fa.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width* Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.fc();a instanceof g.Aa.Ec?d=[a]:a instanceof g.Aa.xp&&(d=a.he);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],f=b.Vf,h=f.length,0<h)for(var r=0;r<h;r+=1){var s;k=f[r].za;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.lg(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,s=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;s&&q.push("L"+s[0]+" "+s[1])}return q}});g.C.jh=g.C.Hh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.X("center",a);this.X("draggable",a);this.X("unit",a,!0);this.X("radius",a);this.X("options",a);this.Fu();this.X("display",b)},$o:function(a){var b=this.get("center");a=a.Nd(Math.pow(2,20-this.map.get("zoom")));a=this.map.Ab(b).add(a);b instanceof g.U?this.set("center",this.map.Od(a)):this.set("center",a)},sz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.Kb.q("change", {type:"change",target:this.Kb})},Fu:function(){if(this.map&&!this.L){var a=this.map,b=a.Ab(this.get("center")),c="px"===this.get("unit"),b=this.L=new g.di({wB:!0,yN:this.Kb.OG,name:"circle-"+g.a.xb(this),zIndex:this.get("options").zIndex||1,map:a,W:new g.Aa.Pg([b.x,b.y]),style:this.get("options")});b.xv=c;b.wo=this;b.fc().Wj=!0;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.bf("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},Zp:function(){if("3D"== this.map.B.view.type){var a=this.L;a&&(a.fc().Wj=!0)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.L,b=this.map.Ab(this.get("center"));a&&(a.fc().za=[b.x,b.y],this.Zp(),this.set("coords",[b.x,b.y]),this.qe=!0,a.fa?this.d8():this.set("display"))},visibleChanged:function(){this.L&&(this.L.fa?this.get("visible")?this.L.fa.style.display="block":this.L.fa.style.display="none":this.set("display"))}, optionsChanged:function(){this.L&&(this.Zp(),this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.ss(),this.L.qe=!0,this.set("display"))},XP:function(a){var b=[],c=[],d,c=a.fc();c instanceof g.Aa.Pg&&(d=[c]);var c=this.map.B.pj.oq(Math.floor(this.map.get("zoom"))),e=a.fa.rotation,b=this.map.get("size"),f=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(f))+Math.abs(b.height*Math.sin(f)))/2,f=(Math.abs(b.width*Math.sin(f))+Math.abs(b.height*Math.cos(f)))/2,b=this.lg(d[0].za); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+f);a=a.get("remain")?5.23:a.xv?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").Q/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},d8:function(){var a=this.L,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.fa)if(g.l.Gn)b=this.XP(a),a.fa.setAttribute("d",b);else{b=this.map.B.pj.oq(Math.floor(this.map.get("zoom")));b=a.xv?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI*this.get("center").Q/ 180));a.fa.style.width=Math.round(2*b);a.fa.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.lg(a.fc().za);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.fa.style.top=Math.round(e[1]-b);a.fa.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.L,b=this.get("radius");a&&(this.Zp(),a.style.radius=b,a.qe=!0,a.q("rad",{target:a,vl:b}),this.d8())}}); ');_jsload_('cgl', '(function(){g.l.gL&&g.Fc&&g.Fc.yf(null,function(){function a(a,n,p){var q=a.Ed,r=a.Oa.slice(1),s=a.FD,u=a.Lg,v=a.Ei,w={};if("region"===a.Ed){var w="ff"+a.iy.substring(1),t=256*(p?2:1),x={};x[w]=[[[0,0],[0,t],[t,t],[t,0]].reverse()];x[w].ec="regions:land";x[w].face=e(w);x[w].border=null;w={0:x}}var y,x=[],F=0;"region"===a.Ed?F=3:"road"===a.Ed?F=3:"building"===a.Ed&&(F=2);for(var C=0,E=r.length;C<E;C+=1){y=r[C];var t=y[1],A;A=y[0];for(var z=u,G=n,H=v,I=s,P=p,L=[],O=0,K=A.length;O<K;O+=1){var D=A[O], Q=h,M="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM",Q=Q||"v5",J=void 0,N=void 0;"v5"<Q?(J=M.length,N=512):(J=27,M=M.substr(0,27),N=333);for(var V=Q=void 0,R=void 0,T=void 0,S=void 0,V=[],R=NaN,T=0,S=D.length;T<S;T++)Q=D[T],Q=M.indexOf(Q),isNaN(R)?R=Q*J:(V.push(R+Q-N),R=NaN);var D=V,S=G,M=I,Z=P,J=[],Q=N=void 0,R=V=0,T=void 0;if(H)for(V=256*z.x,R=256*z.y,T=z.T,S=0,Z=D.length;S<Z;S+=2)N=(V+D[S])*T,Q=(R+D[S+1])*T,J.push([N,Q]);else for(T=(18<S?Math.pow(2,18-S):1)/(Z?2:1),S=0,Z=D.length;S< Z;S+=2){for(;!M&&0!==S&&S<Z-2&&c(D[S-2],D[S-1],D[S],D[S+1],D[S+2],D[S+3]);)S+=2;1===T?J.push([D[S],D[S+1]]):J.push([D[S]/T,D[S+1]/T])}D=J;D.length&&(L.push(D),L.qh=L.qh?L.qh+D.qh:D.qh)}A=L;A.ec=y[F];if(s){A.vX=C;if((G=y[4])&&G.length)for(H=0,I=G.length;H<I;H+=1)for(P=G[H].split("-"),L=A[parseInt(P[0])],O=1,z=P.length;O<z;O+=1)L[parseInt(P[O])].jK=!0;G=y[5];H=0;for(z=A.length;H<z;H+=1)A[H].vJ=y[3]*(p?2:1);if(G&&G.length)for(z=0,H=G.length;z<H;z+=1)for(P=G[z].split("-"),I=P[1].split("^"),A[parseInt(P[0])].i2= I,P=0,L=I.length;P<L;P+=1)-1===b(x,I[P])&&x.push(I[P])}y=y[2];s&&(y=9999);y=w[y]?w[y]:w[y]={};y[t]?y[t].push.apply(y[t],A):("road"===q?(H=1,18<n&&(H=Math.pow(2,n-18)),z=A,G=t,N=H,H=p,G=G.split("&"),I="",L=P=0,O="butt",K="",M=D=0,J="butt",D=e(G[1]),M=parseInt(G[0])*N*(H?2:1),N=G[2],N===l[1]?J="round":N===l[2]?J="square":0!==N.indexOf(l[5])&&(0===N.indexOf(l[3])?K=d("["+N.substring(5).split(")")+"]"):0===N.indexOf(l[4])&&(P=D,D="white",K=d("["+N.substring(8).split(")")+"]"),L=M+1+(H?1:0),M=M-1-(H?1: 0))),""!==G[3]&&(P=e(G[4]),L=parseInt(G[3])*(H?2:1)+M,G=G[5],G===l[1]?O="round":G===l[2]?O="square":0!==G.indexOf(l[5])&&0===G.indexOf(l[3])&&(I=d("["+G.substring(5).split(")")+"]"))),z.tU=D,z.Yv=M,z.Zwa=J,z.$wa=K,z.QP=P,z.hy=L,z.scale=H?2:1,"app"===f&&(z.Yv/=4,z.hy/=4),z.qma=O,z.tma=I):(z=A,G=t,H=p,I=s,G=G.split("&"),z.face=e(I&&k?k:G[0]),G[2]?(z.border=e(G[2]),z.width=(H?2:1)*(parseInt(G[1])||1)):z.border=null),z.T6=!0,y[t]=A)}a.Oa=w;x.length&&(a.En=x)}function b(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b); for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function c(a,b,c,d,e,f){a=c-a;c=e-c;if(0===a||0===c)return a===c?!0:!1;if((f-d)/c===(d-b)/a)return!0}function d(a){return(new Function("return "+a))()}function e(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16));b.push((b.shift()/255).toFixed(2));return"rgba("+b.join(",")+")"}var f,h,k=null,l="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" ");return{parseDataToVector:function(b,c){function d(a){var b= a.Oa;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=s[b[b.length-1]];b[1]=c.browserStyle[c.levelStyleMapping[e]];"road"===a.Ed&&(b[1]=b[1][0],b[4]=c)}})}f=b.mode;h=b.df;var e=b.kz,l=b.Sq;k=b.Vr;var s=null;void 0!==b.fy&&(s=b.Ve[b.fy].stylemaps);for(var u=0,v=b.Pc.length;u<v;u+=1){var w=b.Pc[u];d(w);a(w,e,l)}delete b.Ve;c(null,{data:b})},postStyle:function(){}}})})(g);g.M.canvas.Bba=g.da.extend({A:function(a,b){this.xa=a;this.zb=a.getContext("2d");this.f=b},FEa:function(a,b){var c=a.P.rh,d=c.Q,c=c.R,e=new Date,f=new Date;f.setMonth(0);f.setDate(0);f.setHours(0);f.setMinutes(0);f=(e-f)/864E5+8;b[0]=120-15*(e.getHours()-12)-c;b[1]=d-(-23.5+(182.62>f?f:365.25-f)/182.62*47)},s0:function(a,b,c,d){return{x:a.x-b*c,y:a.y-b*d}},eU:function(a,b){var c=a.data,d=Math.pow(2,b.P.zoom-18);this.T=b.P.T;this.Ha=b.P.Ha;for(var e in c)if(c.hasOwnProperty(e)){for(var f=c[e],h=[], k=[],l=[],m=0,n=f.length;m<n;m+=1){for(var p=f[m],q=p.vJ,r=[],s=[],u=[],v=0,w=p.length-1;v<w;v+=1){var t=this.Ku(p[v]),x=this.Ku(p[v+1]),y=this.s0(t,q,0,0.3*d),F=this.s0(x,q,0,0.3*d);(x.x-t.x)*(y.y-t.y)<(y.x-t.x)*(x.y-t.y)&&(r.unshift(t.x,t.y),r.push(y.x,y.y),r.unshift(x.x,x.y),r.push(F.x,F.y));p[v].jK||h.push(r);r=[];s.push(y.x,y.y);p[v].jK||u.push(y.x,y.y,F.x,F.y)}r.length&&h.push(r);s.length&&k.push(s);u.length&&l.push(u)}this.zb.lineWidth=1.4;m=f.face;n=f.border;if(f.ec&&this.f.e.Bd)for(x=this.f.e.J.Ly(m, n,f.ec,!0),m=x[0],n=x[1],p=m||n,x=0;x<f.length;x+=1)f[x].vd=p;this.nea(l,n);this.kY(h,n);this.kY(k,m)}},nea:function(a,b){if(b){var c=this.zb;c.beginPath();for(var d=a.length-1;0<=d;d-=1){var e=a[d];if(!(4>e.length)){c.moveTo(e[0],e[1]);for(var f=0,h=e.length;f<h;f+=4)c.moveTo(e[f],e[f+1]),c.lineTo(e[f+2],e[f+3])}}c.closePath();c.strokeStyle=b;c.stroke()}},kY:function(a,b){if(b){var c=this.zb;c.beginPath();for(var d=a.length-1;0<=d;d-=1){var e=a[d];if(!(2>e.length)){c.moveTo(e[0],e[1]);for(var f= 2,h=e.length;f<h;f+=2)c.lineTo(e[f],e[f+1])}}c.closePath();c.fillStyle=b;c.fill()}},Ku:function(a){return{x:(a[0]-this.Ha.kc.x)/this.T*(this.f.ja?this.f.Ta:1),y:(a[1]-this.Ha.kc.y)/this.T*(this.f.ja?this.f.Ta:1)}}});g.M.canvas.od=g.M.ae.Vi.extend({ka:[g.Yw],A:function(a,b){arguments.callee.ma.apply(this,arguments);this.bo=120;this.Fi=!0;this.gf=18;this.X("mapStyle",a.e);this.X("style",a.e);a.e.B.xq&&this.zC(a,b);this.Xj=g.o.Zw.Di;a.e.h("zoomend",this.ek,this);a.e.h("moveend",this.ek,this)},reloadChanged:function(){this.f&&(this.f.La=!1);this.oa.clear();this.Mb&&this.Mb.parentNode&&this.Mb.parentNode.removeChild(this.Mb);this.set("display")},yj:function(){return this.vf?[this.Mb,this.TA]:[this.Mb]},$g:function(){this.Mb= document.createElement("div");this.Mb.className="amap-layer";this.TA=document.createElement("canvas");this.TA.className="amap-layer";this.TA.J5=!0;this.FX=new g.M.canvas.Bba(this.TA,this.f);this.bv=document.createDocumentFragment()},Wv:function(a){var b=Math.pow(2,a.P.zoom-this.Ff),c=this.f.ja?this.f.Ta:1,d=a.P.lb.ab(this.Js).kd(this.zm);this.transform=[{translate:this.transform[0].translate.add(d),scale:b,rotate:0,Zy:this.f.wv},{translate:this.transform[1].translate.add(d),scale:b/c,rotate:0,Lk:this.f.get("zIndex")+ (this.f.wv?0:1)}];this.lb=a.P.lb},Mz:function(a,b){this.zd();if(!a.wD){this.fe||this.ek();var c=this.TP(a,b);this.Hi=a.Hi;this.at.apply(this,c);this.Pe(a);if(a.hf||a.fe){if(this.uj){var c=Math.pow(2,a.P.zoom-this.uj.op),d=this.f.ja?this.f.Ta:1,e=a.P.lb.ab(this.uj.np).kd(this.uj.zm/(this.f.ja?this.f.Ta:1));this.transform[1]={translate:this.transform[1].translate.add(e),scale:c/d,rotate:0,Lk:this.f.get("zIndex")+1}}}else this.eU(a,c[1],c[2])}},zd:function(){if(this.zg&&!this.f.La){var a=this.f;g.Be.nf.end({key:"rb", index:2,id:this.e.B.id});a.La=!0;a.Jd?a.qa("renderComplete"):(a.Jd=!0,a.qa("complete"))}},kna:function(a){if(this.vf!==this.uj||a.Hi||!this.uj||this.uj.op!==this.zoom||this.uj.np!==this.lb||this.uj.Rq!==this.rotation||!this.uj.size.gb(a.size))return!0},Uta:function(a){for(var b={},c=0,d=a.length;c<d;c+=1){var e=a[c][9999],f;for(f in e)if(e.hasOwnProperty(f)){var h=f+e[f].ec;b[h]||(b[h]=[],b[h].border=e[f].border,b[h].face=e[f].face,b[h].width=e[f].width,b[h].qh=e[f].qh,b[h].ec=e[f].ec,b[h].vX=e[f].vX); b[h].push.apply(b[h],e[f])}}return{data:b,Ak:a.Ak}},eU:function(a){var b=!1,c=this.Mg;if(0===this.Mg.length)this.vf=null;else for(var d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length&&(b=!1,!e.zg||this.vf&&this.pE(this.vf.Ak,this.sk)||(b=!0,this.vf=[],this.vf.Ak=this.sk),b)){for(b=e.length-1;0<=b;b-=1){var f=e[b].vf;f&&this.vf.push(f)}this.vf=this.Uta(this.vf)}}this.kna(a)&&(c=this.TA,d=this.FX,d.fe=this.fe,e=this.f.ja?this.f.Ta:1,0!==a.P.rotation?g.g.Am(c,2*Math.floor(a.P.Ha.Bc.x)*e,2*Math.floor(a.P.Ha.Bc.y)* e,!0):g.g.Am(c,a.size.width*e,a.size.height*e,!0),d.ee=[a.P.Ha.kc.x,a.P.Ha.kc.y],!(f=this.vf)||14>this.zoom||(this.FX.eU(f,a),this.uj=this.vf,this.uj.op=this.zoom,this.uj.np=this.lb,this.uj.zm=this.T,this.uj.Rq=this.rotation,this.uj.size=a.size))},Pe:function(a){var b=Math.pow(2,this.zoom-this.me),c=this.lb.ab(this.Na);c.x<-g.a.Fa/2&&(c.x+=g.a.Fa);c.x>g.a.Fa/2&&(c.x-=g.a.Fa);c.kd(this.Kg);a=new g.H(a.P.Ha.Bc.x*(this.f.ja?this.f.Ta:1),a.P.Ha.Bc.y*(this.f.ja?this.f.Ta:1));this.transform=[{translate:this.fQ, scale:b,rotate:0,Zy:this.f.wv},{translate:a,scale:1/(this.f.ja?this.f.Ta:1),rotate:0,Lk:this.f.get("zIndex")+(this.f.wv?0:1)}]},SI:function(a,b,c){if("region"===a)for(var d in b){if(b.hasOwnProperty(d)){a=b[d];for(var e in a)if(a.hasOwnProperty(e)){var f=a[e];!this.e.Bd&&f.ec&&(f.face=this.J.xs(f.face,f.ec,!0,c))}}}else if("road"===a)for(d in b){if(b.hasOwnProperty(d))for(e in a=b[d],a)if(a.hasOwnProperty(e)&&(f=a[e],!this.e.Bd&&f.ec)){f.QP=this.J.km(f.QP,f.ec,!1,!0,c);f.tU=this.J.km(f.tU,f.ec,!0, !0,c);var h=this.J.kv(f.ec),k=f.hy,l=f.Yv,m=f.scale;h&&h.strokeWidth&&(k=l+2*m*h.strokeWidth);h&&h.fillWidth&&(k=k-l+m*h.fillWidth);h&&h.fillWidth&&(l=m*h.fillWidth);f.hy=k;f.Yv=l}}else if("building"===a)for(d in b)if(b.hasOwnProperty(d))for(e in a=b[d],a)a.hasOwnProperty(e)&&(f=a[e],!this.e.Bd&&f.ec&&(h=this.J.Ly(f.face,f.border,f.ec,!0,c),f.face=h[0],f.border=h[1]))}});g.M.canvas.od.ed=g.da.extend({A:function(a){this.f=a;this.Da={}},NK:function(a,b,c,d,e){var f;c=[];for(var h in a)a.hasOwnProperty(h)&&(a[h].Fw=parseInt(h),c.push(a[h]));c.sort(function(a,b){return a.Fw>b.Fw?1:a.Fw<b.Fw?-1:0});for(h in c)if(c.hasOwnProperty(h)){a=c[h];for(var k in a)if(a.hasOwnProperty(k)){d=a[k];var l=d.face;f=d.border;d.ec&&this.J.e.Bd&&(b?(f=this.J.Ly(l,f,d.ec,!0),l=f[0],f=f[1]):l=f=this.J.xs(l,d.ec,!0),d.vd=l);this.kU(d,l,f,d.width,b,e)}}},kU:function(a,b,c,d,e){var f=this.xa.getContext("2d"), h,k,l,m,n=[NaN,NaN,0],p=[NaN,NaN];f.save();c&&d&&(f.strokeStyle=c,f.lineWidth=d*this.Qb);b&&(f.fillStyle=b);this.lA={};f.beginPath();h=a.length;if(0<h)for(var q=0;q<h;q+=1)for(k=a[q],l=0,m=k.length;l<m;l+=1)if(n=k[l],0===l)p=n,f.moveTo(n[0]*this.Qb,n[1]*this.Qb);else if(n[0]!==p[0]||n[1]!==p[1])f.lineTo(n[0]*this.Qb,n[1]*this.Qb),p=n;b&&f.fill();if(e&&(f.beginPath(),h=a.length,0<h))for(q=0;q<h;q+=1)for(k=a[q],l=0,m=k.length;l<m;l+=1)if(n=k[l],0===l)p=n,f.moveTo(n[0]*this.Qb,n[1]*this.Qb);else if(n[0]!== p[0]||n[1]!==p[1])p.jK?(f.moveTo(n[0]*this.Qb,n[1]*this.Qb),n.jK&&f.lineTo(n[0]*this.Qb,n[1]*this.Qb)):f.lineTo(n[0]*this.Qb,n[1]*this.Qb),p=n;c&&d&&f.stroke();f.restore();return!0},u8:function(a,b){var c,d=18<b?Math.pow(2,b-18):1,e=[],f;for(f in a)a.hasOwnProperty(f)&&(a[f].Fw=parseInt(f),e.push(a[f]));e.sort(function(a,b){return a.Fw>b.Fw?1:-1});for(f in e)if(e.hasOwnProperty(f)){c=e[f];var h,k;for(h in c)if(c.hasOwnProperty(h)){k=c[h];var l=k.QP,m=k.hy,n=k.Yv,d=k.scale;if(k.ec&&this.J.e.Bd){var l= this.J.km(l,k.ec,!1,!0),p=this.J.kv(k.ec);p&&p.strokeWidth&&(m=n+2*d*p.strokeWidth);p&&p.fillWidth&&(m=m-n+d*p.fillWidth)}(k.vd=l)&&this.t8(k,l,m,k.qma,k.tma)}for(h in c)c.hasOwnProperty(h)&&(k=c[h],l=k.tU,n=k.Yv,d=k.scale,k.ec&&this.J.e.Bd&&(l=this.J.km(l,k.ec,!0,!0),(p=this.J.kv(k.ec))&&p.fillWidth&&(n=d*p.fillWidth)),(k.vd=l)&&this.t8(k,l,n,k.Zwa,k.$wa))}},t8:function(a,b,c,d,e){var f=this.xa.getContext("2d");f.save();if(!(0>=c)&&b){f.lineWidth=c*this.Qb;f.strokeStyle=b;f.lineCap=d;f.lineJoin= "bevel";var h;if(e&&1<e.length)for(h=[],b=0;b<e.length;b+=1)h[b]=e[b]*this.Qb;f.setLineDash?(this.Y1(f,a),h&&(f.setLineDash(h),f.lineDashOffset=h[0])):h?this.Oma(f,a,h):this.Y1(f,a);f.stroke();f.restore();return!0}},Y1:function(a,b){a.beginPath();var c,d,e,f,h,k,l;c=0;for(f=b.length;c<f;c+=1)for(k=b[c],d=0,h=k.length;d<h;d+=1)if(e=k[d],0===d)a.moveTo(e[0]*this.Qb,e[1]*this.Qb),l=e;else if(e[0]!==l[0]||e[1]!==l[1])a.lineTo(e[0]*this.Qb,e[1]*this.Qb),l=e},Oma:function(a,b,c){a.beginPath();var d,e,f, h,k,l,m;a.vI=c[0]+c[1];a.GE=!1;d=0;for(h=b.length;d<h;d+=1)for(l=b[d],e=0,k=l.length;e<k;e+=1)if(f=l[e],0===e)a.moveTo(f[0]*this.Qb,f[1*this.Qb]),m=f;else if(f[0]!==m[0]||f[1]!==m[1])a.EQ(m[0]*this.Qb,m[1]*this.Qb,f[0]*this.Qb,f[1]*this.Qb,c),m=f;a.closePath()}}); ');_jsload_('sync', '(function(){if(g.r.Nc){var a=function(){var a=g.r.Nc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(g.r.Nc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+g.r.Nc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+g.r.key,"t="+c];c.push("resolution="+ window.innerWidth+"*"+window.innerHeight);c.push("mob="+(g.l.ba?1:0));c.push("vt="+(g.l.Xp?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+g.l.DL||0);c.push("detect="+g.l.ja);c=g.r.Zd+"/v3/log/init?"+c.join("&");new g.jb.yb(c,{callback:"callback"})})(); ')